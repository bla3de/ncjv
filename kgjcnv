repeat task.wait() until game.Players.LocalPlayer.Character; local StarterGui = game:GetService("StarterGui"); local function Notify(Title, Message, Time) StarterGui:SetCore("SendNotification", {Title = Title, Text = Message, Duration = Time or 5}) end; if _G.capy then return Notify("Already Loaded", "Rejoin to continue.") else _G.capy = true end
getgenv().Players = cloneref(game:GetService("Players"))
getgenv().Workspace = cloneref(game:GetService("Workspace"))
getgenv().ReplicatedStorage = cloneref(game:GetService("ReplicatedStorage"))
getgenv().RunService = cloneref(game:GetService("RunService"))
getgenv().Lighting = cloneref(game:GetService("Lighting"))
getgenv().UIS = cloneref(game:GetService("UserInputService"))
getgenv().ScriptContext = cloneref(game:GetService("ScriptContext"))
getgenv().Camera = cloneref(game:GetService("Workspace").CurrentCamera)
getgenv().player = cloneref(game:GetService("Players").LocalPlayer)
getgenv().Mouse = getgenv().player:GetMouse()
getgenv().Terrain = cloneref(game:GetService("Workspace").Terrain)
getgenv().VirtualUser = cloneref(game:GetService("VirtualUser"))
getgenv().LocalPlayer = getgenv().player
getgenv().PlayerScripts = cloneref(getgenv().player:FindFirstChildOfClass("PlayerScripts"))
getgenv().RawMetatable = getrawmetatable(game)
getgenv().OldNameCall = getrawmetatable(game).__namecall
getgenv().UserInputService = cloneref(game:GetService("UserInputService"))
--pashalka
local TeleportService = cloneref(game:GetService("TeleportService"))
local CoreGui = cloneref(game:GetService("CoreGui"))
local RS = cloneref(game:GetService("RunService"))
local ReplicatedStorage = cloneref(game:GetService("ReplicatedStorage"))

local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/MSTTOPPER/Scripts/refs/heads/main/uilibbara", true))()
local capy = Library:CreateUI("Murder Mystery 2 / CapyHub / t.me/CapyExploits", "Status: Premium user,Join t.me/CapyExploits!")

getgenv().tab1 = capy:AddTab(false, "Combat")
getgenv().tab2 = capy:AddTab(false, "Hitbox expander")
getgenv().tab10 = capy:AddTab(false, "Optimization")
getgenv().tab3 = capy:AddTab(false, "Visual")
getgenv().tab13 = capy:AddTab(false, "Trolls Tab")
getgenv().tab12 = capy:AddTab(true, "DELUXE")
getgenv().tab4 = capy:AddTab(false, "Teleport")
getgenv().tab5 = capy:AddTab(false, "Auto Farm")
getgenv().tab6 = capy:AddTab(false, "Local Player")
getgenv().tab7 = capy:AddTab(false, "Emote")
getgenv().tab8 = capy:AddTab(false, "ActMgr")

getgenv().configFileName = "configmm2.txt"

getgenv().saveConfig = function(stateTable)
    writefile(getgenv().configFileName, game.HttpService:JSONEncode(stateTable))
end

getgenv().loadConfig = function()
    if isfile(getgenv().configFileName) then
        local success, data = pcall(function()
            return game.HttpService:JSONDecode(readfile(getgenv().configFileName))
        end)

        if success and type(data) == "table" then
            return data
        end
    end
    return {}
end

getgenv().savedConfig = getgenv().loadConfig()

task.spawn(function()
    while true do
        task.wait(10)
        pcall(function()
        print("the config was saved")
            writefile(getgenv().configFileName, game.HttpService:JSONEncode(getgenv().savedConfig))
        end)
    end
end)

setfpscap(1000)
print("Fps unblock")

getgenv().blockPosition = Vector3.new(-74, 6, 693)
getgenv().blockSize = Vector3.new(100, 2, 100)

if not workspace:FindFirstChild("WideBlock") then
    Instance.new("Part", workspace):SetAttribute("Init", true)
    local b = workspace:GetChildren()[#workspace:GetChildren()]
    b.Name, b.Size, b.Position, b.Anchored, b.CanCollide, b.Transparency = "WideBlock", blockSize, blockPosition, true, true, 0.5
end

Library.addSection(tab13, "TROLS TAB")

Library.addButton(tab13, "Anti Bang", "", function()
local hrp = game.Players.LocalPlayer.Character.HumanoidRootPart
workspace.FallenPartsDestroyHeight = -1000
local lastCFrame = hrp.CFrame
hrp.CFrame = CFrame.new(Vector3.new(0, -500, 0))
task.wait(0.7)
hrp.CFrame = lastCFrame
workspace.FallenPartsDestroyHeight = -500
end)

local Players, TweenService, LocalPlayer, animationId, targetName, targetPlayer, activeAnimation = game:GetService("Players"), game:GetService("TweenService"), game:GetService("Players").LocalPlayer, "10714068222", "", nil, nil
local following = false

Library.addTextbox(tab13, "put the player's name for the bang", "Enter target name", "", function(inputText)
    targetName = inputText:lower()
end)

Library.addToggle(tab13, "activate bang", "Start", false, function(state)
    if not state then
        following = false
        if activeAnimation then
            activeAnimation:Stop()
            activeAnimation = nil
        end
    else
        if targetName == "" then
            print("No target name provided, unable to activate bang")
            return
        end
        targetPlayer = nil
        for _, player in pairs(Players:GetPlayers()) do
            if player.Name:lower():find(targetName) or player.DisplayName:lower():find(targetName) then
                targetPlayer = player
                break
            end
        end
        if targetPlayer and targetPlayer.Character then
            following = true
            local localCharacter = LocalPlayer.Character
            if localCharacter then
                local humanoid = localCharacter:FindFirstChildOfClass("Humanoid")
                if humanoid then
                    local animation = Instance.new("Animation")
                    animation.AnimationId = "rbxassetid://" .. animationId
                    activeAnimation = humanoid:LoadAnimation(animation)
                    activeAnimation:Play()
                    activeAnimation:AdjustSpeed(2)
                end
            end
            coroutine.wrap(function()
                while following do
                    local targetCharacter = targetPlayer.Character
                    local localCharacter = LocalPlayer.Character

                    if targetCharacter and targetCharacter:FindFirstChild("HumanoidRootPart") and localCharacter and localCharacter:FindFirstChild("HumanoidRootPart") then
                        local targetHRP = targetCharacter.HumanoidRootPart
                        local localHRP = localCharacter.HumanoidRootPart

                        local forwardCFrame = targetHRP.CFrame * CFrame.new(0, 0, 1)
                        local backwardCFrame = targetHRP.CFrame * CFrame.new(0, 0, 2.5)

                        local tweenForward = TweenService:Create(
                            localHRP,
                            TweenInfo.new(0.2, Enum.EasingStyle.Linear, Enum.EasingDirection.Out),
                            {CFrame = forwardCFrame}
                        )
                        tweenForward:Play()
                        tweenForward.Completed:Wait()

                        local tweenBackward = TweenService:Create(
                            localHRP,
                            TweenInfo.new(0.2, Enum.EasingStyle.Linear, Enum.EasingDirection.Out),
                            {CFrame = backwardCFrame}
                        )
                        tweenBackward:Play()
                        tweenBackward.Completed:Wait()
                    else
                        following = false
                        break
                    end
                end
            end)()
        else
            print("Target not found!")
        end
    end
end)

local invs = getgenv().savedConfig.invs or false
Library.addToggle(tab13, "Invisible fe", "", invs, function(state)
    invs = state
    getgenv().savedConfig.invs = state
    getgenv().saveConfig(getgenv().savedConfig)

    local player = game.Players.LocalPlayer
    local character = player.Character or player.CharacterAdded:Wait()
    local savedpos

    if invs then
        savedpos = character.HumanoidRootPart.CFrame
        character:MoveTo(Vector3.new(-25.95, 84, 3537.55))
        task.wait(.10)

        local Seat = Instance.new('Seat', game.Workspace)
        Seat.Anchored = false
        Seat.CanCollide = false
        Seat.Name = 'xd'
        Seat.Transparency = 1
        Seat.Position = Vector3.new(-25.95, 84, 3537.55)

        local Weld = Instance.new("Weld", Seat)
        Weld.Part0 = Seat
        Weld.Part1 = character.HumanoidRootPart
        task.wait()

        character.HumanoidRootPart.CFrame = savedpos
    else
        local invisChair = workspace:FindFirstChild('xd')
        if invisChair then
            invisChair:Destroy()
        end
    end
end)

local hiddenfling = getgenv().savedConfig.hiddenfling or false
Library.addToggle(tab13, "Walkingfling", "", hiddenfling, function(state)
    hiddenfling = state
    getgenv().savedConfig.hiddenfling = state
    getgenv().saveConfig(getgenv().savedConfig)

    if hiddenfling then
        coroutine.wrap(function()
            local lp = Players.LocalPlayer
            while hiddenfling do
                RunService.Heartbeat:Wait()
                if not hiddenfling then break end
                local character = lp.Character
                local hrp = character and character:FindFirstChild("HumanoidRootPart")
                if hrp then
                    local vel = hrp.Velocity
                    hrp.Velocity = vel * 20000 + Vector3.new(0, 20000, 0)

                    RunService.RenderStepped:Wait()
                    if not hiddenfling then break end
                    hrp.Velocity = vel

                    RunService.Stepped:Wait()
                    if not hiddenfling then break end
                    hrp.Velocity = vel + Vector3.new(0, 0.1, 0)
                end
            end
        end)()
    end
end)

Library.addButton(tab13, "fling all", "Fling everyone", function()
    loadstring(game:HttpGet("https://pastebin.com/raw/HpNf0TYX"))()
end)

Library.addButton(tab13, "Fling murderer", "", function()
    loadstring(game:HttpGet("https://pastebin.com/raw/YKTYp5Dn"))()
end)

Library.addButton(tab13, "Fling sheriff", "", function()
    loadstring(game:HttpGet("https://pastebin.com/raw/Lx8UkvVv"))()
end)

Library.addSection(tab12, "DELUXE (there is nothing here)")

getgenv().BreakGunConnMurderer = nil
getgenv().BreakGunConnAll = nil

local function FindWeapon(name, player)
	if not (name and player) then return end
	for _, container in pairs({player.Character, player:FindFirstChildOfClass("Backpack")}) do
		if container then
			local tool = container:FindFirstChild(name)
			if tool and tool:IsA("Tool") then
				if name == "Gun" then
					local knifeServer = tool:FindFirstChild("KnifeServer")
					local knifeLocal = tool:FindFirstChild("KnifeLocal")
					if knifeServer and knifeLocal then
						local shoot = (player == LocalPlayer and knifeLocal:FindFirstChild("CreateBeam") and knifeLocal.CreateBeam.RemoteFunction)
							or knifeServer:FindFirstChild("ShootGun")
						if shoot then return shoot end
					end
				elseif name == "Knife" then
					return true
				end
			end
		end
	end
end

local function isAllowedUser(userId)
	for _, id in ipairs(allowedUserIds) do
		if userId == id then
			return true
		end
	end
	return false
end

getgenv().BreakGunMurdererOnly = getgenv().savedConfig.BreakGunMurdererOnly or false
getgenv().BreakGunAllPlayers = getgenv().savedConfig.BreakGunAllPlayers or false

Library.addToggle(tab12, "Break Gun (Murderer Only)", "", getgenv().BreakGunMurdererOnly, function(state)
	if state and not isAllowedUser(LocalPlayer.UserId) then
		getgenv().BreakGunMurdererOnly = false
		getgenv().BreakGunAllPlayers = false
		getgenv().savedConfig.BreakGunMurdererOnly = false
		getgenv().savedConfig.BreakGunAllPlayers = false
		getgenv().saveConfig(getgenv().savedConfig)

		if getgenv().BreakGunConnMurderer then
			getgenv().BreakGunConnMurderer:Disconnect()
			getgenv().BreakGunConnMurderer = nil
		end
		if getgenv().BreakGunConnAll then
			getgenv().BreakGunConnAll:Disconnect()
			getgenv().BreakGunConnAll = nil
		end

		LocalPlayer:Kick("trying to bypass")
		return
	end

	getgenv().BreakGunMurdererOnly = state
	getgenv().savedConfig.BreakGunMurdererOnly = state
	getgenv().saveConfig(getgenv().savedConfig)

	if getgenv().BreakGunConnMurderer then
		getgenv().BreakGunConnMurderer:Disconnect()
		getgenv().BreakGunConnMurderer = nil
	end

	if state then
		getgenv().BreakGunConnMurderer = RunService.Heartbeat:Connect(function()
			if not getgenv().BreakGunMurdererOnly then
				getgenv().BreakGunConnMurderer:Disconnect()
				getgenv().BreakGunConnMurderer = nil
				print("Break Gun (Murderer Only) desactivado correctamente.")
				return
			end
			if FindWeapon("Knife", LocalPlayer) then
				for _, player in pairs(Players:GetPlayers()) do
					if player ~= LocalPlayer then
						local root = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
						local shoot = FindWeapon("Gun", player)
						if root and shoot then
							pcall(function()
								shoot:InvokeServer(1, Vector2.zero, "AH2")
							end)
						end
					end
				end
			end
		end)
	end
end)

Library.addToggle(tab12, "Break Gun (All Players)", "", getgenv().BreakGunAllPlayers, function(state)
	if state and not isAllowedUser(LocalPlayer.UserId) then
		getgenv().BreakGunMurdererOnly = false
		getgenv().BreakGunAllPlayers = false
		getgenv().savedConfig.BreakGunMurdererOnly = false
		getgenv().savedConfig.BreakGunAllPlayers = false
		getgenv().saveConfig(getgenv().savedConfig)

		if getgenv().BreakGunConnMurderer then
			getgenv().BreakGunConnMurderer:Disconnect()
			getgenv().BreakGunConnMurderer = nil
		end
		if getgenv().BreakGunConnAll then
			getgenv().BreakGunConnAll:Disconnect()
			getgenv().BreakGunConnAll = nil
		end

		LocalPlayer:Kick("trying to bypass")
		return
	end

	getgenv().BreakGunAllPlayers = state
	getgenv().savedConfig.BreakGunAllPlayers = state
	getgenv().saveConfig(getgenv().savedConfig)

	if getgenv().BreakGunConnAll then
		getgenv().BreakGunConnAll:Disconnect()
		getgenv().BreakGunConnAll = nil
	end

	if state then
		getgenv().BreakGunConnAll = RunService.Heartbeat:Connect(function()
			if not getgenv().BreakGunAllPlayers then
				getgenv().BreakGunConnAll:Disconnect()
				getgenv().BreakGunConnAll = nil
				print("Break Gun (All Players) desactivado correctamente.")
				return
			end
			for _, player in pairs(Players:GetPlayers()) do
				if player ~= LocalPlayer then
					local root = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
					local shoot = FindWeapon("Gun", player)
					if root and shoot then
						pcall(function()
							shoot:InvokeServer(1, Vector2.zero, "AH2")
						end)
					end
				end
			end
		end)
	end
end)

Library.addSection(tab1, "Knife Silent aim")

getgenv().KnifeSilentAim = {CurrentPrediction = Vector3.zero}
getgenv().KnifeAimEnabled = getgenv().savedConfig.KnifeAimEnabled or false
getgenv().KnifeTargetingMode = getgenv().savedConfig.KnifeTargetingMode or "Normal"
getgenv().KnifeUseFOV = getgenv().savedConfig.KnifeUseFOV or false
getgenv().KnifeShowPrediction = getgenv().savedConfig.KnifeShowPrediction or false
getgenv().KnifeShowFOV = getgenv().savedConfig.KnifeShowFOV or false
getgenv().KnifeFOVSize = getgenv().savedConfig.KnifeFOVSize or 90
getgenv().KnifeFOVColor = getgenv().savedConfig.KnifeFOVColor and Color3.new(unpack(getgenv().savedConfig.KnifeFOVColor)) or Color3.fromRGB(255, 0, 0)

local predictionIntervalHorizontal = getgenv().savedConfig.predictionIntervalHorizontal or 16

local Circle = Drawing.new("Circle")
Circle.Color = getgenv().KnifeFOVColor
Circle.Radius = getgenv().KnifeFOVSize
Circle.Thickness = 1
Circle.Filled = false
Circle.Visible = getgenv().KnifeShowFOV and getgenv().KnifeAimEnabled

local PredictionIndicator = Drawing.new("Circle")
PredictionIndicator.Color = Color3.new(0, 1, 0)
PredictionIndicator.Radius = 4
PredictionIndicator.Thickness = 1
PredictionIndicator.Filled = false
PredictionIndicator.Visible = getgenv().KnifeShowPrediction and getgenv().KnifeAimEnabled

local function UpdateCirclePosition()
    Circle.Position = Vector2.new(Camera.ViewportSize.X / 2, Camera.ViewportSize.Y / 2)
end
UpdateCirclePosition()
Camera:GetPropertyChangedSignal("ViewportSize"):Connect(UpdateCirclePosition)

Library.addToggle(tab1, "Knife Silent Aim", "", getgenv().KnifeAimEnabled, function(state)
    getgenv().KnifeAimEnabled = state
    getgenv().savedConfig.KnifeAimEnabled = state
    getgenv().saveConfig(getgenv().savedConfig)

    Circle.Visible = getgenv().KnifeShowFOV and state
    PredictionIndicator.Visible = getgenv().KnifeShowPrediction and state
end)

Library.addDropdown(tab1, "Knife Aiming Mode", getgenv().KnifeTargetingMode, {"Normal", "Prioritize the Sheriff"}, function(selected)
    getgenv().KnifeTargetingMode = selected
    getgenv().savedConfig.KnifeTargetingMode = selected
    getgenv().saveConfig(getgenv().savedConfig)
end)

Library.addToggle(tab1, "Select Target Inside FOV", "Select target within the FOV", getgenv().KnifeUseFOV, function(state)
    getgenv().KnifeUseFOV = state
    getgenv().savedConfig.KnifeUseFOV = state
    getgenv().saveConfig(getgenv().savedConfig)
end)

Library.addToggle(tab1, "Show Prediction", "Show prediction", getgenv().KnifeShowPrediction, function(state)
    getgenv().KnifeShowPrediction = state
    getgenv().savedConfig.KnifeShowPrediction = state
    getgenv().saveConfig(getgenv().savedConfig)

    PredictionIndicator.Visible = state and getgenv().KnifeAimEnabled
end)

Library.addToggle(tab1, "Show FOV Circle", "Show FOV circle", getgenv().KnifeShowFOV, function(state)
    getgenv().KnifeShowFOV = state
    getgenv().savedConfig.KnifeShowFOV = state
    getgenv().saveConfig(getgenv().savedConfig)

    Circle.Visible = state and getgenv().KnifeAimEnabled
end)

Library.addTextbox(tab1, "FOV Size", tostring(getgenv().KnifeFOVSize), "90", function(inputText)
    local newSize = tonumber(inputText)
    if newSize then
        getgenv().KnifeFOVSize = math.clamp(newSize, 50, 500)
        getgenv().savedConfig.KnifeFOVSize = getgenv().KnifeFOVSize
        getgenv().saveConfig(getgenv().savedConfig)

        Circle.Radius = getgenv().KnifeFOVSize
    end
end)

Library.AddColorPicker(tab1, "Color FOV", getgenv().KnifeFOVColor, function(color)
    getgenv().KnifeFOVColor = color
    getgenv().savedConfig.KnifeFOVColor = {color.R, color.G, color.B}
    getgenv().saveConfig(getgenv().savedConfig)

    Circle.Color = color
end)

Library.addTextbox(tab1, "Knife/Prediction Interval Horizontal", tostring(predictionIntervalHorizontal), "", function(inputText)
    local value = tonumber(inputText)
    if value then
        predictionIntervalHorizontal = math.clamp(value, 1, 100)
        getgenv().savedConfig.predictionIntervalHorizontal = predictionIntervalHorizontal
        getgenv().saveConfig(getgenv().savedConfig)
    end
end)

local function HasGun(player)
    local Backpack = player:FindFirstChild("Backpack")
    local Character = player.Character
    return (Backpack and Backpack:FindFirstChild("Gun")) or (Character and Character:FindFirstChild("Gun"))
end

local function IsInsideFOV(targetPos)
    if not getgenv().KnifeUseFOV then return true end
    local screenPos, onScreen = Camera:WorldToViewportPoint(targetPos)
    if onScreen then
        local distance = (Vector2.new(screenPos.X, screenPos.Y) - Vector2.new(Camera.ViewportSize.X/2, Camera.ViewportSize.Y/2)).Magnitude
        return distance <= getgenv().KnifeFOVSize
    end
    return false
end

local function GetKnifeTarget()
    if not getgenv().KnifeAimEnabled then return end
    local ClosestPlayer, ClosestDistance = nil, math.huge
    local LocalRoot = LocalPlayer.Character and LocalPlayer.Character.PrimaryPart
    if not LocalRoot then return end

    for _, Player in pairs(Players:GetPlayers()) do
        if Player ~= LocalPlayer then
            local TargetRoot = Player.Character and Player.Character.PrimaryPart
            if TargetRoot then
                local Distance = (LocalRoot.Position - TargetRoot.Position).Magnitude
                if IsInsideFOV(TargetRoot.Position) and Distance < ClosestDistance then
                    if getgenv().KnifeTargetingMode == "Prioritize the Sheriff" and HasGun(Player) then
                        return Player
                    elseif getgenv().KnifeTargetingMode == "Normal" then
                        ClosestPlayer, ClosestDistance = Player, Distance
                    end
                end
            end
        end
    end
    return ClosestPlayer
end

local function GetKnifePrediction()
    if not getgenv().KnifeAimEnabled then return end
    local Target = GetKnifeTarget()
    if Target then
        local TargetRoot = Target.Character and Target.Character.PrimaryPart
        if TargetRoot then
            local TargetVelocity = TargetRoot.AssemblyLinearVelocity
            local PredictionFactor = predictionIntervalHorizontal / 100
            local PredictedPosition = TargetRoot.Position + Vector3.new(TargetVelocity.X, 0, TargetVelocity.Z) * PredictionFactor

            if getgenv().KnifeShowPrediction then
                local ScreenPos, OnScreen = Camera:WorldToViewportPoint(PredictedPosition)
                if OnScreen then
                    PredictionIndicator.Position = Vector2.new(ScreenPos.X, ScreenPos.Y)
                    PredictionIndicator.Visible = true
                else
                    PredictionIndicator.Visible = false
                end
            end
            
            return PredictedPosition
        end
    end
    PredictionIndicator.Visible = false
    return nil
end

RunService.RenderStepped:Connect(function()
    if not getgenv().KnifeAimEnabled then
        Circle.Visible = false
        PredictionIndicator.Visible = false
        return
    end
    Circle.Visible = getgenv().KnifeShowFOV
    getgenv().KnifeSilentAim.CurrentPrediction = GetKnifePrediction() or getgenv().KnifeSilentAim.CurrentPrediction
end)

Library.addLabel(tab1, "Gun silent aim")

getgenv().savedConfig = getgenv().savedConfig or getgenv().loadConfig()

getgenv().SharpnessMultiplier = getgenv().savedConfig.SharpnessMultiplier or 0.5
getgenv().GunSilentAim = {CurrentPrediction = Vector3.zero}
getgenv().SilentAimEnabled = getgenv().savedConfig.SilentAimEnabled or false
getgenv().GunSharpnessEnabled = getgenv().savedConfig.GunSharpnessEnabled or false
getgenv().PredictionType = getgenv().savedConfig.PredictionType or "Dynamic"
getgenv().ShowPredictionIndicator = getgenv().savedConfig.ShowPredictionIndicator or false

local predictionIntervalHorizontal = getgenv().savedConfig.GunPredictionHorizontal or 12
local predictionIntervalVertical = getgenv().savedConfig.GunPredictionVertical or 5

local PredictionIndicator = Drawing.new("Circle")
PredictionIndicator.Color = Color3.new(0, 0, 1)
PredictionIndicator.Radius = 4
PredictionIndicator.Thickness = 1
PredictionIndicator.Filled = false
PredictionIndicator.Visible = getgenv().ShowPredictionIndicator

Library.addToggle(tab1, "Gun Silent Aim", "", getgenv().SilentAimEnabled, function(state)
    getgenv().SilentAimEnabled = state
    getgenv().savedConfig.SilentAimEnabled = state
    getgenv().saveConfig(getgenv().savedConfig)
end)

Library.addToggle(tab1, "Gun Sharpness Shooter", "Sharpened gun", getgenv().GunSharpnessEnabled, function(state)
    getgenv().GunSharpnessEnabled = state
    getgenv().savedConfig.GunSharpnessEnabled = state
    getgenv().saveConfig(getgenv().savedConfig)
end)

Library.addToggle(tab1, "Show Prediction Indicator", "View prediction", getgenv().ShowPredictionIndicator, function(state)
    getgenv().ShowPredictionIndicator = state
    getgenv().savedConfig.ShowPredictionIndicator = state
    getgenv().saveConfig(getgenv().savedConfig)
    PredictionIndicator.Visible = state
end)

Library.addDropdown(tab1, "Gun Prediction Type", getgenv().PredictionType, {"Dynamic", "Static", "With Ping"}, function(selected)
    getgenv().PredictionType = selected
    getgenv().savedConfig.PredictionType = selected
    getgenv().saveConfig(getgenv().savedConfig)
end)

Library.addSlider(tab1, "Prediction Interval Horizontal", "", 1, 15, predictionIntervalHorizontal, function(value)
    predictionIntervalHorizontal = value
    getgenv().savedConfig.GunPredictionHorizontal = value
    getgenv().saveConfig(getgenv().savedConfig)
end)

Library.addSlider(tab1, "Prediction Interval Vertical", "", 1, 6, predictionIntervalVertical, function(value)
    predictionIntervalVertical = value
    getgenv().savedConfig.GunPredictionVertical = value
    getgenv().saveConfig(getgenv().savedConfig)
end)

local function HasKnife(player)
    local Backpack = player:FindFirstChild("Backpack")
    local Character = player.Character
    return (Backpack and Backpack:FindFirstChild("Knife")) or (Character and Character:FindFirstChild("Knife"))
end

local function GetClosestGunTarget()
    if not getgenv().SilentAimEnabled then return end
    local ClosestPlayer, ClosestDistance = nil, math.huge
    local LocalRoot = LocalPlayer.Character and LocalPlayer.Character.PrimaryPart
    if not LocalRoot then return end

    for _, Player in pairs(Players:GetPlayers()) do
        if Player ~= LocalPlayer then
            local TargetRoot = Player.Character and Player.Character.PrimaryPart
            if TargetRoot then
                local Distance = (LocalRoot.Position - TargetRoot.Position).Magnitude
                if Distance < ClosestDistance and HasKnife(Player) then
                    ClosestPlayer, ClosestDistance = Player, Distance
                end
            end
        end
    end
    return ClosestPlayer
end

local function GetGunPrediction()
    if not getgenv().SilentAimEnabled then return nil end
    local LocalRoot = LocalPlayer.Character and LocalPlayer.Character.PrimaryPart
    if not LocalRoot then return end

    local Target = GetClosestGunTarget()
    if Target then
        local TargetRoot = Target.Character and Target.Character.PrimaryPart
        if TargetRoot then
            local Prediction = TargetRoot.Position
            local TargetVelocity = TargetRoot.AssemblyLinearVelocity

            if getgenv().PredictionType == "Dynamic" then
                Prediction = Prediction + (TargetVelocity * (predictionIntervalHorizontal / 100)) + Vector3.new(0, predictionIntervalVertical / 100, 0)
            end

            if getgenv().GunSharpnessEnabled then
                Prediction = Prediction:Lerp(TargetRoot.Position, getgenv().SharpnessMultiplier)
            end

            if getgenv().ShowPredictionIndicator then
                PredictionIndicator.Position = Vector2.new(Prediction.X, Prediction.Y)
                PredictionIndicator.Visible = true
            else
                PredictionIndicator.Visible = false
            end

            return Prediction
        end
    end
    return nil
end

local Camera = workspace.CurrentCamera

RunService.RenderStepped:Connect(function()
    if getgenv().SilentAimEnabled then
        local Prediction = GetGunPrediction()
        getgenv().GunSilentAim.CurrentPrediction = Prediction or getgenv().GunSilentAim.CurrentPrediction

        if getgenv().ShowPredictionIndicator and Prediction then
            local ScreenPosition, OnScreen = Camera:WorldToViewportPoint(Prediction)
            if OnScreen then
                PredictionIndicator.Position = Vector2.new(ScreenPosition.X, ScreenPosition.Y)
                PredictionIndicator.Visible = true
            else
                PredictionIndicator.Visible = false
            end
        else
            PredictionIndicator.Visible = false
        end
    else
        PredictionIndicator.Visible = false
    end
end)

Library.addToggle(tab1, "Force shot", "", false, function(state)  
    getgenv().ForceShotEnabled = state  
end)  

local OldNameCall  
OldNameCall = hookmetamethod(game, "__namecall", function(Object, ...)  
    local NamecallMethod = getnamecallmethod()  
    local Arguments = {...}  
  
    if getgenv().KnifeAimEnabled and NamecallMethod == "FireServer" and tostring(Object) == "Throw" then  
        local Success, Error = pcall(function()  
            Arguments[1] = CFrame.new(getgenv().KnifeSilentAim.CurrentPrediction)  
        end)  
        if Error then warn("Error! :", Error) end  
        return OldNameCall(Object, unpack(Arguments))  
    end  
  
    if getgenv().SilentAimEnabled and NamecallMethod == "InvokeServer" and tostring(Object) == "RemoteFunction" then  
        local Success, Error = pcall(function()  
            Arguments[2] = getgenv().GunSilentAim.CurrentPrediction  
        end)  
        if Error then warn("Error! :", Error) end  
        return OldNameCall(Object, unpack(Arguments))  
    end  
  
    return OldNameCall(Object, unpack(Arguments))  
end)  


Library.addButton(tab1, "teleport and shoot the Murderer", "Teleport and shoot the murderer", function()
local CoreGui     = game:GetService("CoreGui")
local Players     = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

local MainGui = Instance.new("ScreenGui")
MainGui.Name = "AutoTpShootGui"
MainGui.Parent = CoreGui

local ShootButton = Instance.new("TextButton")
ShootButton.Name = "ShootButton"
ShootButton.Size = UDim2.new(0, 50, 0, 50)
ShootButton.Position = UDim2.new(0, 742, 0, -38)
ShootButton.Text = "Tp Shoot"
ShootButton.Font = Enum.Font.Gotham
ShootButton.TextSize = 12
ShootButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ShootButton.BackgroundColor3 = Color3.fromRGB(200, 200, 200)
ShootButton.BackgroundTransparency = 0.5
ShootButton.Draggable = true
ShootButton.BorderSizePixel = 0
ShootButton.Parent = MainGui

local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 8)
corner.Parent = ShootButton

local borderFrame = Instance.new("Frame")
borderFrame.Size = UDim2.new(1, 0, 1, 0)
borderFrame.Position = UDim2.new(0, 0, 0, 0)
borderFrame.BackgroundTransparency = 1
borderFrame.ZIndex = ShootButton.ZIndex + 1
borderFrame.Parent = ShootButton

local borderStroke = Instance.new("UIStroke")
borderStroke.Thickness = 2
borderStroke.Color = Color3.fromRGB(180, 180, 180)
borderStroke.Parent = borderFrame

local frameCorner = Instance.new("UICorner")
frameCorner.CornerRadius = UDim.new(0, 10)
frameCorner.Parent = borderFrame

local function getRoot(char)
    return char and char:FindFirstChild("HumanoidRootPart")
end

local function hasKnife(player)
    return (player.Character and player.Character:FindFirstChild("Knife"))
        or (player:FindFirstChild("Backpack") and player.Backpack:FindFirstChild("Knife"))
end

local function getTarget()
    for _, p in ipairs(Players:GetPlayers()) do
        if p ~= LocalPlayer and hasKnife(p) then
            return p
        end
    end
end

local function equipGun()
    local gun = LocalPlayer.Backpack:FindFirstChild("Gun")
    if gun then
        gun.Parent = LocalPlayer.Character
        return true
    end
end

local function shoot()
    local target = getTarget()
    if not target or not target.Character then return end
    local targetRoot = getRoot(target.Character)
    if not targetRoot then return end

    local forward = targetRoot.CFrame.LookVector
    local predictedPosition = targetRoot.Position
                             + targetRoot.AssemblyLinearVelocity * 0.1
                             + Vector3.new(0, -1, 0)
                             + forward * 0.3

    local char = LocalPlayer.Character
    if not char then return end
    local gun = char:FindFirstChild("Gun")
    if gun and gun:FindFirstChild("KnifeLocal") and gun.KnifeLocal:FindFirstChild("CreateBeam") then
        gun.KnifeLocal.CreateBeam.RemoteFunction:InvokeServer(1, predictedPosition, "AH2")
    end
end

local function teleportAndShoot()
    local char = LocalPlayer.Character
    local root = getRoot(char)
    local target = getTarget()
    if not (root and target and target.Character) then return end

    local targetRoot = getRoot(target.Character)
    if not targetRoot then return end

    local originalPos = root.Position
    local teleportPos = targetRoot.Position - targetRoot.CFrame.LookVector * 3
    char:SetPrimaryPartCFrame(CFrame.new(teleportPos, targetRoot.Position))

    task.delay(0.61, function()
        if char.PrimaryPart then
            char:SetPrimaryPartCFrame(CFrame.new(originalPos, targetRoot.Position))
        end
    end)

    task.delay(0.35, function()
        local gun = char:FindFirstChild("Gun")
        if gun then
            gun.Parent = LocalPlayer.Backpack
        end
    end)
end

ShootButton.MouseButton1Click:Connect(function()
    if equipGun() then
        for i = 1, 5 do
            task.spawn(function()
                task.wait(0.25)
                shoot()
            end)
        end
        teleportAndShoot()
    end
end)
end)

Library.addLabel(tab1, "Auto shoot to murderer")

local g = getgenv()
g.autoShootEnabled = g.savedConfig.autoShootEnabled or false
g.shootOffset = g.savedConfig.shootOffset or 2
g.detectionRange = g.savedConfig.detectionRange or 100
g.shootMode = g.savedConfig.shootMode or 1
g.shootDelay = g.savedConfig.shootDelay or 1.1
g.lastShootTime = 0

Library.addToggle(tab1, "Auto Shoot murderer", "beta", g.autoShootEnabled, function(val)
    g.autoShootEnabled = val
    g.savedConfig.autoShootEnabled = val
    g.saveConfig(g.savedConfig)
end)

Library.addDropdown(tab1, "Select Shoot Mode", g.shootMode == 1 and "visible" or "visible&Knife", {"visible", "visible&Knife"}, function(selected)
    if selected == "visible" then
        g.shootMode = 1
    elseif selected == "visible&Knife" then
        g.shootMode = 2
    end
    g.savedConfig.shootMode = g.shootMode
    g.saveConfig(g.savedConfig)
end)

local function getPredictedPosition(player, shootOffset)
    local playerChar = player.Character
    if not playerChar then
        return Vector3.new(0, 0, 0)
    end
    local playerHRP = playerChar:FindFirstChild("UpperTorso")
    local playerHum = playerChar:FindFirstChild("Humanoid")
    if not playerHRP or not playerHum then
        return Vector3.new(0, 0, 0)
    end
    local velocity = playerHRP.AssemblyLinearVelocity
    local playerMoveDirection = playerHum.MoveDirection
    local predictedPosition = playerHRP.Position + (velocity * Vector3.new(0, 0.5, 0)) * (shootOffset / 15) + playerMoveDirection * shootOffset
    return predictedPosition
end

local function hasKnife(player)
    if player.Character and player.Character:FindFirstChild("Knife") and player.Character:FindFirstChild("Knife"):IsA("Tool") then
        return true
    end
    local backpack = player:FindFirstChild("Backpack")
    if backpack and backpack:FindFirstChild("Knife") and backpack:FindFirstChild("Knife"):IsA("Tool") then
        return true
    end
    return false
end

local function findClosestPlayer()
    local closestPlayer = nil
    local closestDistance = math.huge
    for _, player in ipairs(Players:GetPlayers()) do
        if player ~= LocalPlayer and player.Character and player.Character:FindFirstChild("UpperTorso") and hasKnife(player) then
            local distance = (LocalPlayer.Character.UpperTorso.Position - player.Character.UpperTorso.Position).Magnitude
            if distance < closestDistance then
                closestDistance = distance
                closestPlayer = player
            end
        end
    end
    return closestPlayer, closestDistance
end

local function equipGun()
    local character = LocalPlayer.Character
    local backpack = LocalPlayer:WaitForChild("Backpack")
    local tools = {character:GetChildren(), backpack:GetChildren()}
    for _, toolList in ipairs(tools) do
        for _, tool in ipairs(toolList) do
            if tool:IsA("Tool") and tool.Name == "Gun" then
                if tool.Parent == backpack then
                    tool.Parent = character
                end
                return tool
            end
        end
    end
    return nil
end

local function raycastToTarget(targetPosition)
    local character = LocalPlayer.Character
    if not character then return nil end
    local head = character:FindFirstChild("Head")
    if not head then return nil end
    local origin = head.Position
    local direction = (targetPosition - origin).Unit * 1000
    local raycastParams = RaycastParams.new()
    raycastParams.FilterDescendantsInstances = {LocalPlayer.Character}
    raycastParams.FilterType = Enum.RaycastFilterType.Blacklist
    local rayResult = workspace:Raycast(origin, direction, raycastParams)
    return rayResult
end

local function shootAtTarget(targetPlayer, mode)
    local predictedPos = getPredictedPosition(targetPlayer, g.shootOffset)
    local rayResult = raycastToTarget(predictedPos)
    if rayResult and rayResult.Instance then
        local hitPart = rayResult.Instance
        local targetCharacter = targetPlayer.Character
        if targetCharacter and targetCharacter:FindFirstChild("UpperTorso") then
            local isTargetVisible = hitPart:IsDescendantOf(targetCharacter)
            if mode == 1 then
                if isTargetVisible then
                    local currentTime = tick()
                    if currentTime - g.lastShootTime >= g.shootDelay then
                        local gun = equipGun()
                        if gun and gun:FindFirstChild("KnifeLocal") and gun.KnifeLocal:FindFirstChild("CreateBeam") and gun.KnifeLocal.CreateBeam:FindFirstChild("RemoteFunction") then
                            local args = {1, predictedPos, "AH2"}
                            gun.KnifeLocal.CreateBeam.RemoteFunction:InvokeServer(unpack(args))
                            g.lastShootTime = currentTime
                        end
                    end
                end
            elseif mode == 2 then
                if isTargetVisible and targetCharacter:FindFirstChild("Knife") then
                    local currentTime = tick()
                    if currentTime - g.lastShootTime >= g.shootDelay then
                        local gun = equipGun()
                        if gun and gun:FindFirstChild("KnifeLocal") and gun.KnifeLocal:FindFirstChild("CreateBeam") and gun.KnifeLocal.CreateBeam:FindFirstChild("RemoteFunction") then
                            local args = {1, predictedPos, "AH2"}
                            gun.KnifeLocal.CreateBeam.RemoteFunction:InvokeServer(unpack(args))
                            g.lastShootTime = currentTime
                        end
                    end
                end
            end
        end
    end
end

RunService.Heartbeat:Connect(function(delta)
    if g.autoShootEnabled and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("UpperTorso") then
        local targetPlayer, distance = findClosestPlayer()
        if targetPlayer and distance < g.detectionRange then
            local isTargetVisible = raycastToTarget(targetPlayer.Character.UpperTorso.Position)
            if isTargetVisible then
                shootAtTarget(targetPlayer, g.shootMode)
            end
        end
    end
end)
Library.addLabel(tab1, "shoot with button")
local button = nil

Library.addButton(tab1, "Shoot the murderer (Button)", "Shoot the murderer (button)", function()
local coreGui = game:GetService("CoreGui")  
    if coreGui:FindFirstChild("ShootMurdererGui") then   
        return   
    end  
    local Players = game:GetService("Players")  
    local LocalPlayer = Players.LocalPlayer  
    local screenGui = Instance.new("ScreenGui")  
    screenGui.Name = "ShootMurdererGui"  
    screenGui.Parent = coreGui  
    button = Instance.new("TextButton")  
    button.Name = "Button"  
    button.Size = UDim2.new(0, 130, 0, 100)  
    button.Position = UDim2.new(0.85, -50, 0.15, -50)  
    button.Text = "Shoot"  
    button.Font = Enum.Font.Gotham  
    button.TextSize = 13  
    button.TextColor3 = Color3.fromRGB(255, 255, 255)  
    button.BackgroundColor3 = Color3.fromRGB(200, 200, 200)  
    button.BackgroundTransparency = 0.7  
    button.Draggable = true  
    button.BorderSizePixel = 0  
    button.AutoButtonColor = true  
    button.Parent = screenGui  
  
local corner = Instance.new("UICorner")  
corner.CornerRadius = UDim.new(0, 8)  
corner.Parent = button  
  
local borderFrame = Instance.new("Frame")  
borderFrame.Size = UDim2.new(1, 0, 1, 0)  
borderFrame.Position = UDim2.new(0, 0, 0, 0)  
borderFrame.BackgroundTransparency = 1  
borderFrame.ZIndex = button.ZIndex + 1  
borderFrame.Parent = button  
  
local borderStroke = Instance.new("UIStroke")  
borderStroke.Thickness = 2  
borderStroke.Color = Color3.fromRGB(180, 180, 180)  
borderStroke.Parent = borderFrame  
  
local frameCorner = Instance.new("UICorner")  
frameCorner.CornerRadius = UDim.new(0, 10)  
frameCorner.Parent = borderFrame  
  
local function getCharacterRootPart(character)  
    return character and (character:FindFirstChild("HumanoidRootPart") or character:FindFirstChild("Torso") or character:FindFirstChild("UpperTorso"))  
end  
  
local function EquipGun()  
    local character = LocalPlayer.Character  
    local gun = LocalPlayer.Backpack:FindFirstChild("Gun") or (character and character:FindFirstChild("Gun"))  
    if gun and gun.Parent == LocalPlayer.Backpack then  
        gun.Parent = character  
        task.delay(.17, function()  
            if gun.Parent == character then  
                gun.Parent = LocalPlayer.Backpack  
            end  
        end)  
        return true  
    elseif gun and gun.Parent == character then  
        return true  
    end  
    return false  
end  
  
local function hasKnife(player)  
    return player.Backpack:FindFirstChild("Knife") or (player.Character and player.Character:FindFirstChild("Knife"))  
end  
  
local function getKnifePlayer()  
    for _, player in pairs(Players:GetPlayers()) do  
        if player ~= LocalPlayer and hasKnife(player) and player.Character then  
            return player  
        end  
    end  
    return nil  
end  
  
local function shootAtKnifePlayer()  
    local target = getKnifePlayer()  
    if target and target.Character then  
        local targetRoot = getCharacterRootPart(target.Character)  
        local originRoot = getCharacterRootPart(LocalPlayer.Character)  
        if not targetRoot or not originRoot then return end  
  
        local camera = workspace.CurrentCamera  
        local screenPoint, onScreen = camera:WorldToViewportPoint(targetRoot.Position)  
        if onScreen and (originRoot.Position - targetRoot.Position).Magnitude < 30 then  
            local args = {  
                [1] = 1,  
                [2] = targetRoot.Position,  
                [3] = "AH2"  
            }  
            local gun = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Gun")  
            if gun and gun:FindFirstChild("KnifeLocal") and gun.KnifeLocal:FindFirstChild("CreateBeam") then  
                gun.KnifeLocal.CreateBeam.RemoteFunction:InvokeServer(unpack(args))  
            end  
            return  
        end  
  
        local distance = (originRoot.Position - targetRoot.Position).Magnitude  
        local velocity = targetRoot.AssemblyLinearVelocity  
        local direction = targetRoot.CFrame.LookVector  
  
        local predictionTime = math.clamp(distance / 100, 0.05, 0.18)  
        local predictedPosition = targetRoot.Position   
            + velocity * predictionTime   
            + direction * (2.2 * predictionTime)  
  
        predictedPosition = targetRoot.Position:Lerp(predictedPosition, 0.5)  
  
        if predictedPosition.Y < targetRoot.Position.Y then  
            predictedPosition = Vector3.new(predictedPosition.X, targetRoot.Position.Y, predictedPosition.Z)  
        end  
  
        local args = {  
            [1] = 1,  
            [2] = predictedPosition,  
            [3] = "AH2"  
        }  
  
        local gun = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Gun")  
        if gun and gun:FindFirstChild("KnifeLocal") and gun.KnifeLocal:FindFirstChild("CreateBeam") then  
            gun.KnifeLocal.CreateBeam.RemoteFunction:InvokeServer(unpack(args))  
        end  
    end  
end  
  
button.MouseButton1Click:Connect(function()  
    if EquipGun() then  
        for i = 1, 11 do  
            task.spawn(function()  
            warn("shoot")  
                shootAtKnifePlayer()  
            end)  
        end  
    end  
end)
end)

Library.addToggle(tab1, "ability to drag the button", "ability to drag the button or not", function()
    return getgenv().savedConfig.buttonDraggable or false
end, function(state)
    if button then
        button.Draggable = state
        getgenv().savedConfig.buttonDraggable = state
        getgenv().saveConfig(getgenv().savedConfig)
    end
end)

Library.addSlider(tab1, "Shoot Button Size", "", 10, 300, getgenv().savedConfig.buttonSize or 130, function(size)
    local aspectRatio = 100 / 130
    if button then
        button.Size = UDim2.new(0, size, 0, size * aspectRatio)
        getgenv().savedConfig.buttonSize = size
        getgenv().saveConfig(getgenv().savedConfig)
    end
end)

Library.addSlider(tab1, "Shoot Button Transparency", "", 1, 9, getgenv().savedConfig.buttonTransparency or 7, function(transparency)
    if button then
        button.BackgroundTransparency = transparency
        getgenv().savedConfig.buttonTransparency = transparency
        getgenv().saveConfig(getgenv().savedConfig)
    end
end)

Library.addButton(tab1, "Remove Button", "destruir el botÃ³n", function()
    if button then
        button:Destroy()
        button = nil
        getgenv().savedConfig.buttonRemoved = true
        getgenv().saveConfig(getgenv().savedConfig)
    end
end)

Library.addLabel(tab1, "For Murderer")

local player = game.Players.LocalPlayer
local auraKnife = false
local dist = getgenv().nearestDistance or 7.1
local hrp
local knifeEquippedByScript = false
player.CharacterAdded:Connect(function(char)
    hrp = char:WaitForChild("HumanoidRootPart", 2)
end)
if player.Character then
    hrp = player.Character:FindFirstChild("HumanoidRootPart")
end
local function knifeIsEquipped()
    return player.Character and player.Character:FindFirstChild("Knife")
end
local function findNearest()
    if not hrp then return end
    local closest, minDist = nil, dist
    for _, p in ipairs(game.Players:GetPlayers()) do
        if p ~= player and p.Character then
            local otherHrp = p.Character:FindFirstChild("HumanoidRootPart")
            if otherHrp then
                local d = (hrp.Position - otherHrp.Position).Magnitude
                if d <= minDist then
                    closest, minDist = p, d
                end
            end
        end
    end
    return closest
end

Library.addToggle(tab1, "Knife aura", "", false, function(on)
    auraKnife = on
    if not on then return end
    while auraKnife do
        if not hrp then task.wait(0.1) continue end
        local target = findNearest()
        local equipped = knifeIsEquipped()
        if target then
            if not equipped then
                local knife = player.Backpack:FindFirstChild("Knife")
                if knife then
                    knife.Parent = player.Character
                    knifeEquippedByScript = true
                end
            end
            if knifeIsEquipped() then
                player.Character.Knife.KnifeServer.SlashStart:FireServer(1)
            end
        elseif knifeEquippedByScript and equipped then
            task.wait(0.3)
            local knife = player.Character:FindFirstChild("Knife")
            if knife then
                knife.Parent = player.Backpack
                knifeEquippedByScript = false
            end
        end
        task.wait(0.2)
    end
end)

Library.addTextbox(tab1, "Equpe Knife distance", "", tostring(dist), function(text)
    local n = tonumber(text)
    if n then
        dist = n
        getgenv().nearestDistance = n
    end
end)

local autoKillAllActive = false

Library.addToggle(tab1, "auto Kill all (Be a murderer)", "Auto matar a todos (ser asesino)", false, function(state)
    autoKillAllActive = state
    if state then
        task.spawn(function()
            while autoKillAllActive do
                local localCharacter = game.Players.LocalPlayer.Character
                local knife = localCharacter and localCharacter:FindFirstChild("Knife")
                
                if knife then
                    local stabEvent = knife:FindFirstChild("Stab")
                    if stabEvent then
                        for _, player in ipairs(game.Players:GetPlayers()) do
                            if not autoKillAllActive then break end

                            if player ~= game.Players.LocalPlayer then
                                local hrp = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
                                if hrp then
                                    stabEvent:FireServer("Slash")
                                    firetouchinterest(hrp, knife.Handle, 1)
                                    firetouchinterest(hrp, knife.Handle, 0)
                                end
                            end
                        end
                    end
                end

                task.wait(0.1)
            end
        end)
    end
end)

Library.addButton(tab1, "Kill all (be murderer) ", "Matar a todos (ser murderer)", function()
local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local backpack = player:FindFirstChild("Backpack")

local knife = character:FindFirstChild("Knife") or (backpack and backpack:FindFirstChild("Knife"))

if knife and knife.Parent == backpack then
    knife.Parent = character 
    repeat task.wait() until knife.Parent == character
end

if knife and knife.Parent == character then
    local stabEvent = knife:FindFirstChild("Stab")
    
    if stabEvent then
        for _, target in ipairs(game.Players:GetPlayers()) do
            if target ~= player then
                local targetCharacter = target.Character
                local humanoidRootPart = targetCharacter and targetCharacter:FindFirstChild("HumanoidRootPart")

                if humanoidRootPart then
                    stabEvent:FireServer("Slash")
                    firetouchinterest(humanoidRootPart, knife.Handle, 1)
                    firetouchinterest(humanoidRootPart, knife.Handle, 0)
                end
            end
        end
    end
end
end)

Library.addButton(tab1, "Kill Sheriff/Hero (be murderer) ", "Matar a Sheriff/Hero (ser murderer)", function()
local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local backpack = player:FindFirstChild("Backpack")

local knife = character:FindFirstChild("Knife") or (backpack and backpack:FindFirstChild("Knife"))

if knife and knife.Parent == backpack then
    knife.Parent = character
    repeat task.wait() until knife.Parent == character
end

if knife and knife.Parent == character then
    local stabEvent = knife:FindFirstChild("Stab")

    if stabEvent then
        for _, target in ipairs(game.Players:GetPlayers()) do
            if target ~= player then
                local targetCharacter = target.Character
                local targetBackpack = target:FindFirstChild("Backpack")

                local hasGun = (targetCharacter and targetCharacter:FindFirstChild("Gun")) or 
                               (targetBackpack and targetBackpack:FindFirstChild("Gun"))

                if hasGun then
                    local humanoidRootPart = targetCharacter and targetCharacter:FindFirstChild("HumanoidRootPart")

                    if humanoidRootPart then
                        stabEvent:FireServer("Slash")
                        firetouchinterest(humanoidRootPart, knife.Handle, 1)
                        firetouchinterest(humanoidRootPart, knife.Handle, 0)
                    end
                end
            end
        end
    end
end
end)
 
Library.addLabel(tab1, "Cam aimbot")
 
Library.addToggle(tab1, "Cam Aimbot murderer", "Aimbot al asesino", false, function(state)
    getgenv().aimbotEnabled = state
end)

local RS, Players, ReplicatedStorage = game:GetService("RunService"), game:GetService("Players"), game:GetService("ReplicatedStorage")
local LP, Camera = Players.LocalPlayer, workspace.CurrentCamera

RS.RenderStepped:Connect(function()
    if not getgenv().aimbotEnabled then return end
    
    local target = nil
    local roles = ReplicatedStorage:FindFirstChild("GetPlayerData", true):InvokeServer()

    for name, data in pairs(roles or {}) do
        if data.Role == "Murderer" and name ~= LP.Name then
            target = Players:FindFirstChild(name)
            break
        end
    end

    if target and target.Character then
        local rootPart = target.Character:FindFirstChild("HumanoidRootPart")
        if rootPart then
            local dirToTarget = (LP.Character.HumanoidRootPart.Position - rootPart.Position).Unit
            local targetPos = rootPart.Position + rootPart.CFrame.LookVector * 3
            Camera.CFrame = CFrame.new(Camera.CFrame.Position, targetPos)
        end
    end
end)

getgenv().DodgeKnife = false

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local localPlayer = Players.LocalPlayer

local teleportRadius = 9
local detectionRadius = 25
local descendantConnection
local heartbeatConnection
local activeKnives = {}

local function removeAllKnives()
    for _, knife in ipairs(workspace:GetChildren()) do
        if knife:IsA("Model") and knife.Name == "ThrowingKnife" then
            knife:Destroy()
        end
    end
end

local function isPathClear(startPos, endPos)
    local rayParams = RaycastParams.new()
    rayParams.FilterType = Enum.RaycastFilterType.Blacklist
    rayParams.FilterDescendantsInstances = {localPlayer.Character}

    local result = workspace:Raycast(startPos, (endPos - startPos), rayParams)
    return not result
end

local function teleportPlayer(knife)
    if localPlayer.Character and localPlayer.Character:FindFirstChild("HumanoidRootPart") then
        if localPlayer.Backpack:FindFirstChild("Knife") or localPlayer.Character:FindFirstChild("Knife") then
            return
        end

        local playerPos = localPlayer.Character.HumanoidRootPart.Position
        local bladePart = knife:FindFirstChild("BladePosition")

        if bladePart and bladePart:IsA("BasePart") then
            local knifePos = bladePart.Position
            local distance = (playerPos - knifePos).Magnitude

            if distance <= teleportRadius then
                local direction = (playerPos - knifePos).Unit
                local perpendicularDirection = Vector3.new(-direction.Z, 0, direction.X)
                local safePosition = knifePos + perpendicularDirection * teleportRadius
                local targetPosition = Vector3.new(safePosition.X, playerPos.Y, safePosition.Z)

                if isPathClear(playerPos, targetPosition) then
                    localPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(targetPosition)
                end
            end
        end
    end
end

local function onKnifeAdded(knife)
    if knife:IsA("Model") and knife.Name == "ThrowingKnife" then
        table.insert(activeKnives, knife)
    end
end

local function updateKnives()
    for _, knife in ipairs(activeKnives) do
        if knife and knife.Parent then
            local bladePart = knife:FindFirstChild("BladePosition")
            if bladePart and bladePart:IsA("BasePart") then
                local knifePos = bladePart.Position
                if localPlayer.Character and localPlayer.Character:FindFirstChild("HumanoidRootPart") then
                    local playerPos = localPlayer.Character.HumanoidRootPart.Position
                    local distance = (playerPos - knifePos).Magnitude
                    if distance <= detectionRadius then
                        teleportPlayer(knife)
                    end
                end
            end
        end
    end
end

local function toggleDetection()
    if getgenv().DodgeKnife then
        removeAllKnives()
        activeKnives = {}

        descendantConnection = workspace.DescendantAdded:Connect(onKnifeAdded)
        heartbeatConnection = RunService.Heartbeat:Connect(updateKnives)
    else
        if descendantConnection then descendantConnection:Disconnect() end
        if heartbeatConnection then heartbeatConnection:Disconnect() end
        activeKnives = {}
    end
end

Library.addToggle(tab1, "Dodge Throw knife", "Esquivar cuchillo lanzado", false, function(state)
    getgenv().DodgeKnife = state
    toggleDetection()
end)

toggleDetection()
Library.addSection(tab2, "Hitbox Expander")

getgenv().Hitboxexpander = false
getgenv().Players = game:GetService("Players")
getgenv().LocalPlayer = getgenv().Players.LocalPlayer
getgenv().RunService = game:GetService("RunService")

getgenv().HitboxSettings = {
    Size = Vector3.new(10, 10, 10),
    Color = Color3.fromRGB(169, 169, 169),
    Material = Enum.Material.Plastic,
    Collision = false,
    Transparency = 5,
    DefaultSize = Vector3.new(2, 2, 1),
    DefaultColor = Color3.fromRGB(255, 255, 255),
    DefaultMaterial = Enum.Material.SmoothPlastic,
    DefaultCollision = true,
    DefaultTransparency = 1,
}

getgenv().GetCharacterParent = function(player)
    repeat wait() until player.Character
    return player.Character
end

getgenv().ApplyBoxProperties = function(player)
    local character = getgenv().GetCharacterParent(player)
    if not character then return end

    local rootPart = character:FindFirstChild("HumanoidRootPart")
    if not rootPart then return end

    if getgenv().Hitboxexpander then
        rootPart.Size = getgenv().HitboxSettings.Size
        rootPart.Color = getgenv().HitboxSettings.Color
        rootPart.Material = getgenv().HitboxSettings.Material
        rootPart.CanCollide = getgenv().HitboxSettings.Collision
        rootPart.Transparency = getgenv().HitboxSettings.Transparency / 10
    else
        rootPart.Size = getgenv().HitboxSettings.DefaultSize
        rootPart.Color = getgenv().HitboxSettings.DefaultColor
        rootPart.Material = getgenv().HitboxSettings.DefaultMaterial
        rootPart.CanCollide = getgenv().HitboxSettings.DefaultCollision
        rootPart.Transparency = getgenv().HitboxSettings.DefaultTransparency
    end
end

getgenv().StartUpdatingHitboxes = function()
    getgenv().playerAddedConnection = getgenv().Players.PlayerAdded:Connect(function(player)
        if player ~= getgenv().LocalPlayer then
            getgenv().ApplyBoxProperties(player)
        end
    end)

    getgenv().heartbeatConnection = getgenv().RunService.Heartbeat:Connect(function()
        if getgenv().Hitboxexpander then
            for _, player in ipairs(getgenv().Players:GetPlayers()) do
                if player ~= getgenv().LocalPlayer then
                    getgenv().ApplyBoxProperties(player)
                end
            end
        end
    end)
end

getgenv().StopUpdatingHitboxes = function()
    if getgenv().playerAddedConnection then
        getgenv().playerAddedConnection:Disconnect()
        getgenv().playerAddedConnection = nil
    end

    if getgenv().heartbeatConnection then
        getgenv().heartbeatConnection:Disconnect()
        getgenv().heartbeatConnection = nil
    end
end

Library.addToggle(tab2, "Hitbox Expander", "", getgenv().Hitboxexpander, function(state)
    getgenv().Hitboxexpander = state
    if getgenv().Hitboxexpander then
        getgenv().StartUpdatingHitboxes()
        for _, player in ipairs(getgenv().Players:GetPlayers()) do
            if player ~= getgenv().LocalPlayer then
                getgenv().ApplyBoxProperties(player)
            end
        end
    else
        getgenv().StopUpdatingHitboxes()
    end
end)

Library.addSlider(tab2, "Hitbox Size", "", 1, 50, 10, function(value)
    getgenv().HitboxSettings.Size = Vector3.new(value, value, value)
end)

Library.addSlider(tab2, "Hitbox Transparency", "", 1, 10, 8, function(value)
    getgenv().HitboxSettings.Transparency = value
end)

Library.addToggle(tab2, "Hitbox Collision", "", getgenv().HitboxSettings.Collision, function(state)
    getgenv().HitboxSettings.Collision = state
end)

Library.addDropdown(tab2, "Select Hitbox Material", "Plastic", {
    "Plastic", "SmoothPlastic", "Glass", "Neon", "Wood", "CorrodedMetal",
    "ForceField", "Slate", "DiamondPlate", "Granite", "Marble", "Cobblestone", "WoodenPlanks"
}, function(val)
    getgenv().HitboxSettings.Material = Enum.Material[val]
end)

Library.AddColorPicker(tab2, "Select a color", getgenv().HitboxSettings.Color, function(color)
    getgenv().HitboxSettings.Color = color
end)

Library.addLabel(tab2, "Stab reach")

getgenv().reachKnifeActive = getgenv().savedConfig.reachKnifeActive or false
getgenv().knifeReachAdjust = getgenv().savedConfig.knifeReachAdjust or 8

Library.addToggle(tab2, "Stab reach", "", getgenv().reachKnifeActive, function(state)
    getgenv().reachKnifeActive = state
    getgenv().savedConfig.reachKnifeActive = state
    getgenv().saveConfig(getgenv().savedConfig)
end)

Library.addSlider(tab2, "Stab reach adjust", "Stab reach adjust", 1, 255, getgenv().knifeReachAdjust, function(value)
    getgenv().knifeReachAdjust = tonumber(value)
    getgenv().savedConfig.knifeReachAdjust = value
    getgenv().saveConfig(getgenv().savedConfig)
end)

game:GetService("RunService").Heartbeat:Connect(function()
    if getgenv().reachKnifeActive then
        local localPlayer = game.Players.LocalPlayer
        if localPlayer and localPlayer.Character then
            local localCharacter = localPlayer.Character
            local localRoot = localCharacter:FindFirstChild("HumanoidRootPart")
            local knife = localCharacter:FindFirstChild("Knife")
            if knife and localRoot then
                local stabEvent = knife:FindFirstChild("Stab")
                if stabEvent then
                    local closestPlayer = nil
                    local shortestDistance = getgenv().knifeReachAdjust

                    for _, player in ipairs(game.Players:GetPlayers()) do
                        if player ~= localPlayer and player.Character then
                            local targetRoot = player.Character:FindFirstChild("HumanoidRootPart")
                            if targetRoot then
                                local distance = (localRoot.Position - targetRoot.Position).Magnitude

                                if distance <= getgenv().knifeReachAdjust and distance < shortestDistance then
                                    closestPlayer = player
                                    shortestDistance = distance
                                end
                            end
                        end
                    end

                    if closestPlayer then
                        local targetRoot = closestPlayer.Character:FindFirstChild("HumanoidRootPart")
                        if targetRoot then
                            local args = { [1] = "Slash" }
                            stabEvent:FireServer(unpack(args))
                            firetouchinterest(targetRoot, knife.Handle, 1)
                            firetouchinterest(targetRoot, knife.Handle, 0)
                        end
                    end
                end
            end
        end
    end
end)

Library.addLabel(tab2, "Throw Knife Reach")

game.Players.LocalPlayer.CharacterAdded:Connect(function()
    task.wait(2)
    for _, obj in ipairs(workspace:GetChildren()) do
        if obj:IsA("Model") and obj.Name == "ThrowingKnife" then
            obj:Destroy()
        end
    end
end)

getgenv().throwingKnifeActive = getgenv().savedConfig.throwingKnifeActive or false
getgenv().throwingKnifeReach = getgenv().savedConfig.throwingKnifeReach or 8

Library.addToggle(tab2, "Throw Knife Reach", "", getgenv().throwingKnifeActive, function(state)
    getgenv().throwingKnifeActive = state
    getgenv().savedConfig.throwingKnifeActive = state
    getgenv().saveConfig(getgenv().savedConfig)
end)

Library.addSlider(tab2, "Throwing Knife Reach", "Throwing Knife Reach", 12, 255, getgenv().throwingKnifeReach, function(value)
    getgenv().throwingKnifeReach = tonumber(value)
    getgenv().savedConfig.throwingKnifeReach = value
    getgenv().saveConfig(getgenv().savedConfig)
end)

game:GetService("RunService").RenderStepped:Connect(function()
    if not getgenv().throwingKnifeActive then return end

    local localPlayer = game.Players.LocalPlayer
    local character = localPlayer.Character
    if not character then return end

    local root = character:FindFirstChild("HumanoidRootPart")
    local knife = character:FindFirstChild("Knife")
    if not (knife and root) then return end

    local stabEvent = knife:FindFirstChild("Stab")
    if not stabEvent then return end

    stabEvent:FireServer("Slash")

    for _, throwingKnife in ipairs(workspace:GetChildren()) do
        if throwingKnife:IsA("Model") and throwingKnife.Name == "ThrowingKnife" then
            local bladePos = throwingKnife:FindFirstChild("BladePosition")
            local knifePos = bladePos and bladePos.Position or knife.Handle.Position

            for _, player in ipairs(game.Players:GetPlayers()) do
                if player ~= localPlayer and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
                    local targetRoot = player.Character.HumanoidRootPart
                    local humanoid = player.Character:FindFirstChild("Humanoid")
                    if humanoid and humanoid.Health > 0 then
                        local dist = (knifePos - targetRoot.Position).Magnitude
                        if dist <= getgenv().throwingKnifeReach then
                            firetouchinterest(targetRoot, knife.Handle, 1)
                            firetouchinterest(targetRoot, knife.Handle, 0)
                        end
                    end
                end
            end
        end
    end
end)

getgenv().xray, getgenv().saved, getgenv().transparencyLevel = false, {}, 0.5
local player = game.Players.LocalPlayer

local function setTransparency(obj)
    for _, v in ipairs(obj:GetChildren()) do
        if v:IsA("BasePart") and not (v.Parent:IsA("Model") and v.Parent:FindFirstChildOfClass("Humanoid") and v.Parent ~= player.Character) then
            if getgenv().xray then
                getgenv().saved[v] = getgenv().saved[v] or v.Transparency
                v.Transparency = getgenv().transparencyLevel
            else
                if getgenv().saved[v] then
                    v.Transparency, getgenv().saved[v] = getgenv().saved[v], nil
                end
            end
        end
        setTransparency(v)
    end
end

Library.addToggle(tab3, "XRay", "", false, function(state)
    getgenv().xray = state
    setTransparency(workspace)
end)

Library.addSlider(tab3, "XRay Transparency", "XRay Transparency", 0, 10, 1, function(value)
    getgenv().transparencyLevel = value / 10
    if getgenv().xray then setTransparency(workspace) end
end)

local camera = Workspace.CurrentCamera
local originalTransparency, partsToRestore = {}, {}

local radii = {
	front = 1,
	back = 1,
	vertical = 1,
	horizontal = 3
}

local delayTime, enabled = 0.2, false

local overlapParams = OverlapParams.new()
overlapParams.FilterType = Enum.RaycastFilterType.Exclude

Library.addToggle(tab3, "Camera No Clip", "", false, function(state)
	enabled = state
end)

local function makeTransparent(part, affected)
	if part:IsA("BasePart") and part.Transparency < 1 then
		affected[part] = true
		if not originalTransparency[part] then
			originalTransparency[part] = part.Transparency
		end
		part.Transparency = 0.5
	end
end

RunService.RenderStepped:Connect(function()
	if not enabled then return end

	local character = player.Character
	if not character then return end

	local head = character:FindFirstChild("Head")
	local hrp = character:FindFirstChild("HumanoidRootPart")
	local upperTorso = character:FindFirstChild("UpperTorso")
	if not head or not hrp then return end

	local origin = camera.CFrame.Position
	local backPosition = origin - camera.CFrame.LookVector * 3

	overlapParams.FilterDescendantsInstances = {character}

	local allParts = {}
	for _, parts in pairs({
		Workspace:GetPartBoundsInRadius(origin, radii.front, overlapParams),
		Workspace:GetPartBoundsInRadius(backPosition, radii.back, overlapParams),
		Workspace:GetPartBoundsInRadius(origin, radii.vertical, overlapParams),
		Workspace:GetPartBoundsInRadius(origin, radii.horizontal, overlapParams),
	}) do
		for _, part in pairs(parts) do
			allParts[part] = true
		end
	end

	local affected = {}

	local rayParams = RaycastParams.new()
	rayParams.FilterType = Enum.RaycastFilterType.Exclude
	rayParams.FilterDescendantsInstances = {character}
	rayParams.IgnoreWater = true

	for _, target in ipairs({head.Position, hrp.Position, upperTorso and upperTorso.Position}) do
		if target then
			local ray = Workspace:Raycast(origin, (target - origin), rayParams)
			if ray and ray.Instance then
				makeTransparent(ray.Instance, affected)
			end
		end
	end

	for part in pairs(allParts) do
		makeTransparent(part, affected)
	end

	for part, original in pairs(originalTransparency) do
		if not affected[part] and not partsToRestore[part] then
			partsToRestore[part] = true
			task.delay(delayTime, function()
				if part and part:IsDescendantOf(Workspace) and not affected[part] then
					part.Transparency = original
					originalTransparency[part] = nil
				end
				partsToRestore[part] = nil
			end)
		end
	end
end)

getgenv().seeCoins = false  
local adorns, connection = {}  

local function createAdorn(part)  
	if not getgenv().seeCoins then return end
	if part:IsA("BasePart") and not adorns[part] then  
		local box = Instance.new("BoxHandleAdornment")  
		box.Size = Vector3.new(2, 2, 2)  
		box.Color3, box.Transparency, box.AlwaysOnTop, box.ZIndex, box.Adornee, box.Parent =   
			Color3.fromRGB(100, 255, 100), 0.7, true, 1, part, part  
		adorns[part] = box  
	end  
end  

Library.addToggle(tab3, "See Coins", "Ver monedas", false, function(state)  
	getgenv().seeCoins = state  
	if connection then connection:Disconnect() end  
	for _, v in pairs(adorns) do v:Destroy() end  
	table.clear(adorns)  

	if state then  
		for _, container in pairs(game.Workspace:GetDescendants()) do  
			if container:IsA("Model") and container.Name == "CoinContainer" then  
				for _, part in pairs(container:GetChildren()) do 
					if part:IsA("BasePart") then
						createAdorn(part)
					end
				end  
			end  
		end  
		connection = game.Workspace.DescendantAdded:Connect(function(d)  
			if d:IsA("BasePart") and d.Parent and d.Parent.Name == "CoinContainer" then 
				createAdorn(d) 
			end  
		end)  
	end  
end)

getgenv().TeleportToRareEgg = getgenv().savedConfig.TeleportToRareEgg or false
getgenv().SeeRareEggs = getgenv().savedConfig.SeeRareEggs or false

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

local function setupCharacter(character)
    return character:WaitForChild("HumanoidRootPart")
end

local currentHumanoidRootPart = LocalPlayer.Character and setupCharacter(LocalPlayer.Character) or nil

LocalPlayer.CharacterAdded:Connect(function(character)
    currentHumanoidRootPart = setupCharacter(character)
end)

local adornments = {}

local function markRareEgg(part)
    if getgenv().SeeRareEggs and not adornments[part] then
        local box = Instance.new("BoxHandleAdornment")
        box.Size = part.Size
        box.Adornee = part
        box.AlwaysOnTop = true
        box.ZIndex = 5
        box.Color3 = Color3.fromRGB(255, 255, 0)
        box.Transparency = 0.3
        box.Parent = part
        adornments[part] = box
    end
end

workspace.DescendantAdded:Connect(function(obj)
    if obj:IsA("ParticleEmitter") then
        local coin = obj.Parent
        if coin and coin:IsA("BasePart") and coin.Parent and coin.Parent.Name == "CoinContainer" then
            if getgenv().SeeRareEggs then
                markRareEgg(coin)
            end
            if getgenv().TeleportToRareEgg and currentHumanoidRootPart then
                currentHumanoidRootPart.CFrame = coin.CFrame + Vector3.new(0, 3, 0)
            end
        end
    end
end)

for _, containerHolder in pairs(workspace:GetChildren()) do
    local coinContainer = containerHolder:FindFirstChild("CoinContainer")
    if coinContainer then
        for _, coin in pairs(coinContainer:GetChildren()) do
            if coin:FindFirstChildOfClass("ParticleEmitter") then
                if getgenv().SeeRareEggs then
                    markRareEgg(coin)
                end
                if getgenv().TeleportToRareEgg and currentHumanoidRootPart then
                    currentHumanoidRootPart.CFrame = coin.CFrame + Vector3.new(0, 3, 0)
                    return
                end
            end
        end
    end
end

Library.addToggle(tab3, "Teleport to Rare Egg", "", getgenv().TeleportToRareEgg, function(n)
    getgenv().TeleportToRareEgg = n
    getgenv().savedConfig.TeleportToRareEgg = n
    getgenv().saveConfig(getgenv().savedConfig)
    if n and currentHumanoidRootPart then
        for _, containerHolder in pairs(workspace:GetChildren()) do
            local coinContainer = containerHolder:FindFirstChild("CoinContainer")
            if coinContainer then
                for _, coin in pairs(coinContainer:GetChildren()) do
                    if coin:FindFirstChildOfClass("ParticleEmitter") then
                        currentHumanoidRootPart.CFrame = coin.CFrame + Vector3.new(0, 3, 0)
                        return
                    end
                end
            end
        end
    end
end)

Library.addToggle(tab3, "See Rare Eggs", "", getgenv().SeeRareEggs, function(n)
    getgenv().SeeRareEggs = n
    getgenv().savedConfig.SeeRareEggs = n
    getgenv().saveConfig(getgenv().savedConfig)

    if n then
        for _, containerHolder in pairs(workspace:GetChildren()) do
            local coinContainer = containerHolder:FindFirstChild("CoinContainer")
            if coinContainer then
                for _, coin in pairs(coinContainer:GetChildren()) do
                    if coin:FindFirstChildOfClass("ParticleEmitter") then
                        markRareEgg(coin)
                    end
                end
            end
        end
    else
        for part, adornment in pairs(adornments) do
            if adornment then
                adornment:Destroy()
            end
        end
        table.clear(adornments)
    end
end)

local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer

getgenv().ChamESP = getgenv().savedConfig.ChamESP or false
getgenv().ChamTransparency = getgenv().savedConfig.ChamTransparency or 0.8
getgenv().E = getgenv().savedConfig.E or false
getgenv().H = getgenv().savedConfig.H or false
getgenv().T = getgenv().savedConfig.T or false
getgenv().eB = getgenv().savedConfig.eB or false
getgenv().F = getgenv().savedConfig.F or 0.8
getgenv().Roles = {}

local lastData

local function isDifferent(t1, t2)
    if typeof(t1) ~= typeof(t2) then return true end
    if typeof(t1) ~= "table" then return t1 ~= t2 end
    for k, v in pairs(t1) do
        if isDifferent(v, t2[k]) then return true end
    end
    for k, v in pairs(t2) do
        if t1[k] == nil then return true end
    end
    return false
end

local function updateRoles()
    local success, data = pcall(function() 
        return ReplicatedStorage:FindFirstChild("GetPlayerData", true):InvokeServer() 
    end)
    if success and data and isDifferent(data, lastData) then
        getgenv().Roles = data
        lastData = data
    end
    task.delay(1.4, updateRoles)
end

updateRoles()

local function IsAlive(player)
    local roleData = getgenv().Roles[player.Name]
    return roleData and not roleData.Killed and not roleData.Dead
end

local function getRoleColor(player)
    local roleData = getgenv().Roles[player.Name]
    if roleData and IsAlive(player) then
        local role = roleData.Role
        if role == "Innocent" then
            return Color3.fromRGB(0, 128, 0)
        elseif role == "Sheriff" then
            return Color3.fromRGB(0, 0, 255)
        elseif role == "Hero" then
            return Color3.fromRGB(255, 255, 0)
        elseif role == "Murderer" then
            return Color3.fromRGB(255, 0, 0)
        end
    end
    return Color3.fromRGB(169, 169, 169)
end

local chamUpdateLoop, chamCleanupLoop
local function applyChamESP(player, color)
    if not getgenv().ChamESP then return end
    local character = player.Character
    if character then
        for _, part in pairs(character:GetChildren()) do
            if part:IsA("BasePart") then
                local adornment = part:FindFirstChild("espAdornment")
                if not adornment then
                    adornment = Instance.new("BoxHandleAdornment")
                    adornment.Name = "espAdornment"
                    adornment.Size = part.Size
                    adornment.Adornee = part
                    adornment.AlwaysOnTop = true
                    adornment.ZIndex = 5
                    adornment.Parent = part
                end
                adornment.Color3 = color
                adornment.Transparency = getgenv().ChamTransparency
            end
        end
    end
end

local function clearChamESP()
    for _, player in pairs(Players:GetPlayers()) do
        local character = player.Character
        if character then
            for _, part in pairs(character:GetChildren()) do
                local adornment = part:FindFirstChild("espAdornment")
                if adornment then
                    adornment:Destroy()
                end
            end
        end
    end
end

local function startChamESP()
    if chamUpdateLoop or chamCleanupLoop then return end
    chamUpdateLoop = task.spawn(function()
        while getgenv().ChamESP do
            for _, player in pairs(Players:GetPlayers()) do
                if player == LocalPlayer then continue end
                local color = getRoleColor(player)
                applyChamESP(player, color)
            end
            task.wait(1)
        end
    end)
    chamCleanupLoop = task.spawn(function()
        while getgenv().ChamESP do
            for _, player in pairs(Players:GetPlayers()) do
                if player == LocalPlayer then continue end
                if not IsAlive(player) then
                    applyChamESP(player, Color3.fromRGB(169, 169, 169))
                end
            end
            task.wait(1)
        end
    end)
end

local function stopChamESP()
    getgenv().ChamESP = false
    if chamUpdateLoop then
        task.cancel(chamUpdateLoop)
        chamUpdateLoop = nil
    end
    if chamCleanupLoop then
        task.cancel(chamCleanupLoop)
        chamCleanupLoop = nil
    end
    clearChamESP()
end

local espNameUpdateLoop, espNameCleanupLoop
local function applyESPName(player, color)
    if not getgenv().E then return end
    local character = player.Character
    if character then
        local head = character:FindFirstChild("Head")
        if head then
            local gui = head:FindFirstChild("BillboardGui")
            local textLabel
            if not gui then
                gui = Instance.new("BillboardGui")
                gui.Parent = head
                gui.Adornee = head
                gui.Size = UDim2.new(0, 65, 0, 65)
                gui.StudsOffset = Vector3.new(0, 4, 0)
                gui.AlwaysOnTop = true
                gui.ResetOnSpawn = false
                gui.Enabled = true
                textLabel = Instance.new("TextLabel")
                textLabel.Parent = gui
                textLabel.Size = UDim2.new(0, 65, 0, 65)
                textLabel.BackgroundTransparency = 1
                textLabel.TextScaled = true
                textLabel.Text = player.Name
                textLabel.TextSize = 11
            else
                textLabel = gui:FindFirstChildOfClass("TextLabel")
            end
            if textLabel then
                textLabel.TextColor3 = color
            end
        end
    end
end

local function clearESPName()
    for _, player in pairs(Players:GetPlayers()) do
        local character = player.Character
        if character then
            local head = character:FindFirstChild("Head")
            if head then
                local gui = head:FindFirstChild("BillboardGui")
                if gui then
                    gui:Destroy()
                end
            end
        end
    end
end

local function startESPName()
    if espNameUpdateLoop or espNameCleanupLoop then return end
    espNameUpdateLoop = task.spawn(function()
        while getgenv().E do
            for _, player in pairs(Players:GetPlayers()) do
                if player == LocalPlayer then continue end
                local color = getRoleColor(player)
                applyESPName(player, color)
            end
            task.wait(1)
        end
    end)
    espNameCleanupLoop = task.spawn(function()
        while getgenv().E do
            for _, player in pairs(Players:GetPlayers()) do
                if player == LocalPlayer then continue end
                if not IsAlive(player) then
                    applyESPName(player, Color3.fromRGB(169, 169, 169))
                end
            end
            task.wait(1)
        end
    end)
end

local function stopESPName()
    getgenv().E = false
    if espNameUpdateLoop then
        task.cancel(espNameUpdateLoop)
        espNameUpdateLoop = nil
    end
    if espNameCleanupLoop then
        task.cancel(espNameCleanupLoop)
        espNameCleanupLoop = nil
    end
    clearESPName()
end

local highlightUpdateLoop, highlightCleanupLoop
local function applyHighlight(player, fillColor, outlineColor)
    if not getgenv().H then return end
    local character = player.Character
    if character and character:FindFirstChild("HumanoidRootPart") then
        local highlight = character:FindFirstChild("Highlight")
        if not highlight then
            highlight = Instance.new("Highlight")
            highlight.Parent = character
        end
        highlight.FillColor = fillColor
        highlight.FillTransparency = getgenv().F
        highlight.OutlineColor = outlineColor
    end
end

local function clearHighlight()
    for _, player in pairs(Players:GetPlayers()) do
        local character = player.Character
        if character then
            local highlight = character:FindFirstChild("Highlight")
            if highlight then
                highlight:Destroy()
            end
        end
    end
end

local function startESPHighlight()
    if highlightUpdateLoop or highlightCleanupLoop then return end
    highlightUpdateLoop = task.spawn(function()
        while getgenv().H do
            for _, player in pairs(Players:GetPlayers()) do
                if player == LocalPlayer then continue end
                local color = getRoleColor(player)
                applyHighlight(player, color, color)
            end
            task.wait(1)
        end
    end)
    highlightCleanupLoop = task.spawn(function()
        while getgenv().H do
            for _, player in pairs(Players:GetPlayers()) do
                if player == LocalPlayer then continue end
                if not IsAlive(player) then
                    applyHighlight(player, Color3.fromRGB(169, 169, 169), Color3.fromRGB(169, 169, 169))
                end
            end
            task.wait(1)
        end
    end)
end

local function stopESPHighlight()
    getgenv().H = false
    if highlightUpdateLoop then
        task.cancel(highlightUpdateLoop)
        highlightUpdateLoop = nil
    end
    if highlightCleanupLoop then
        task.cancel(highlightCleanupLoop)
        highlightCleanupLoop = nil
    end
    clearHighlight()
end

local tracerDrawings = {}
RunService.RenderStepped:Connect(function()
    if not getgenv().T then
        for _, line in pairs(tracerDrawings) do
            line.Visible = false
        end
        return
    end
    local camera = workspace.CurrentCamera
    local cx = camera.ViewportSize.X / 2
    local cy = camera.ViewportSize.Y
    for _, player in pairs(Players:GetPlayers()) do
        if player == LocalPlayer or not player.Character then continue end
        local hrp = player.Character:FindFirstChild("HumanoidRootPart")
        local humanoid = player.Character:FindFirstChild("Humanoid")
        if hrp and humanoid and humanoid.Health > 0 then
            local screenPos, onScreen = camera:WorldToViewportPoint(hrp.Position)
            if onScreen then
                local line = tracerDrawings[player]
                if not line then
                    line = Drawing.new("Line")
                    tracerDrawings[player] = line
                    line.Thickness = 1
                end
                line.From = Vector2.new(cx, cy)
                line.To = Vector2.new(screenPos.X, screenPos.Y)
                line.Color = getRoleColor(player)
                line.Visible = true
            else
                if tracerDrawings[player] then
                    tracerDrawings[player].Visible = false
                end
            end
        elseif tracerDrawings[player] then
            tracerDrawings[player]:Remove()
            tracerDrawings[player] = nil
        end
    end
end)

Players.PlayerRemoving:Connect(function(player)
    if tracerDrawings[player] then
        tracerDrawings[player]:Remove()
        tracerDrawings[player] = nil
    end
end)

local function drawESPBox(player)
    if player == LocalPlayer then return end
    local box = Drawing.new("Square")
    box.Visible = false
    box.Thickness = 1
    box.Filled = false
    local function updateBox()
        RunService.RenderStepped:Connect(function()
            if not getgenv().eB or not player.Character or not player.Character:FindFirstChild("HumanoidRootPart") then
                box.Visible = false
                return
            end
            local camera = workspace.CurrentCamera
            local hrp = player.Character:FindFirstChild("HumanoidRootPart")
            local screenPos, onScreen = camera:WorldToViewportPoint(hrp.Position)
            if onScreen then
                box.Size = Vector2.new(1000 / screenPos.Z, 1500 / screenPos.Z)
                box.Position = Vector2.new(screenPos.X - box.Size.X / 2, screenPos.Y - box.Size.Y / 2)
                box.Color = getRoleColor(player)
                box.Visible = true
            else
                box.Visible = false
            end
        end)
    end
    coroutine.wrap(updateBox)()
end

for _, player in pairs(Players:GetPlayers()) do
    drawESPBox(player)
end

Players.PlayerAdded:Connect(function(player)
    drawESPBox(player)
end)

Library.addToggle(tab3, "ESP Box", "", getgenv().eB, function(state)
    getgenv().eB = state
    getgenv().savedConfig.eB = state
    getgenv().saveConfig(getgenv().savedConfig)
end)

Library.addToggle(tab3, "Cham ESP", "", getgenv().ChamESP, function(state)
    getgenv().ChamESP = state
    getgenv().savedConfig.ChamESP = state
    getgenv().saveConfig(getgenv().savedConfig)
    if state then
        startChamESP()
    else
        stopChamESP()
    end
end)

Library.addSlider(tab3, "Cham ESP Transparency", "Cham ESP Transparency", 0, 100, getgenv().ChamTransparency * 100, function(value)
    getgenv().ChamTransparency = value / 100
    getgenv().savedConfig.ChamTransparency = getgenv().ChamTransparency
    getgenv().saveConfig(getgenv().savedConfig)
end)

Library.addToggle(tab3, "ESP Highlight", "", getgenv().H, function(state)
    getgenv().H = state
    getgenv().savedConfig.H = state
    getgenv().saveConfig(getgenv().savedConfig)
    if state then
        startESPHighlight()
    else
        stopESPHighlight()
    end
end)

Library.addSlider(tab3, "ESP Highlight Transparency", "ESP Highlight Transparency", 0, 100, getgenv().F * 100, function(value)
    getgenv().F = value / 100
    getgenv().savedConfig.F = getgenv().F
    getgenv().saveConfig(getgenv().savedConfig)
end)

Players.PlayerAdded:Connect(function(player)
    player.CharacterAdded:Connect(function(character)
        if not getgenv().E then
            local head = character:FindFirstChild("Head")
            if head then
                local gui = head:FindFirstChild("BillboardGui")
                if gui then
                    gui:Destroy()
                end
            end
        end
    end)
end)

Library.addToggle(tab3, "ESP Name", "", getgenv().E, function(state)
    getgenv().E = state
    getgenv().savedConfig.E = state
    getgenv().saveConfig(getgenv().savedConfig)
    if state then
        startESPName()
    else
        stopESPName()
    end
end)

getgenv().sd = false
getgenv().cl = Color3.fromRGB(255, 255, 255)
getgenv().bc = Color3.fromRGB(0, 0, 0)

local function gr(ch)
	local rt = ch:FindFirstChild("HumanoidRootPart") or ch:FindFirstChild("Torso")
	return rt or ch:WaitForChild("HumanoidRootPart", 2) or ch:FindFirstChild("Torso")
end

local function cg(pl)
	if not getgenv().sd then return end
	local ch = pl.Character
	if not ch then return end
	local rt = gr(ch)
	if not rt then return end
	if not rt:FindFirstChild("DistanceBillboard") then
		local gb = Instance.new("BillboardGui")
		gb.Name = "DistanceBillboard"
		gb.Parent = rt
		gb.Adornee = rt
		gb.Size = UDim2.new(0, 30, 0, 30)
		gb.StudsOffset = Vector3.new(0, 1, 0)
		gb.AlwaysOnTop = true
		gb.ResetOnSpawn = false
		gb.Enabled = true

		local tl = Instance.new("TextLabel")
		tl.Parent = gb
		tl.Size = UDim2.new(1, 0, 1, 0)
		tl.BackgroundTransparency = 1
		tl.TextScaled = true
		tl.TextSize = 11
		tl.TextColor3 = getgenv().cl
		tl.TextStrokeTransparency = 0.8
		tl.TextStrokeColor3 = getgenv().bc
		tl.Text = "[0]"
	end
end

Library.addToggle(tab3, "ESP Stunds", "", false, function(s)
	getgenv().sd = s
	for _, pl in ipairs(game.Players:GetPlayers()) do
		if pl ~= game.Players.LocalPlayer and pl.Character then
			local rt = gr(pl.Character)
			local gb = rt and rt:FindFirstChild("DistanceBillboard")
			if s then
				cg(pl)
				if gb then gb.Enabled = true end
			else
				if gb then gb:Destroy() end
			end
		end
	end
end)

local function setupPlayer(pl)
	if pl ~= game.Players.LocalPlayer then
		pl.CharacterAdded:Connect(function(ch)
			if getgenv().sd then cg(pl) end
		end)
		if getgenv().sd and pl.Character then
			cg(pl)
		end
	end
end

for _, pl in ipairs(game.Players:GetPlayers()) do
	setupPlayer(pl)
end

game.Players.PlayerAdded:Connect(setupPlayer)

game:GetService("RunService").Heartbeat:Connect(function()
	if not getgenv().sd then return end
	local lp = game.Players.LocalPlayer
	if not lp or not lp.Character then return end
	local rt = gr(lp.Character)
	if not rt then return end
	for _, pl in ipairs(game.Players:GetPlayers()) do
		if pl ~= lp and pl.Character then
			local r = gr(pl.Character)
			if r then
				local gb = r:FindFirstChild("DistanceBillboard")
				if gb then
					local tl = gb:FindFirstChildOfClass("TextLabel")
					if tl then
						local d = (r.Position - rt.Position).Magnitude
						tl.Text = string.format("[%.1f]", d)
					end
				end
			end
		end
	end
end)

Library.addToggle(tab3, "ESP Tracer", "", getgenv().T, function(state)
    getgenv().T = state
    getgenv().savedConfig.T = state
    getgenv().saveConfig(getgenv().savedConfig)
    if not state then
        for _, line in pairs(tracerDrawings) do
            line:Remove()
        end
        tracerDrawings = {}
    end
end)

local LP = Players.LocalPlayer
local scriptEnabled = getgenv().savedConfig.scriptEnabled or false
local heartbeatConn
local wasVisible = false
local label

local function getPlayerRole()
    local roles = ReplicatedStorage:FindFirstChild("GetPlayerData", true):InvokeServer()
    local data = roles[LP.Name]
    return data and data.Role
end

local function createRoleLabel(role)
    if label then label:Destroy() end

    label = Instance.new("TextLabel")
    label.Name = "RoleLabel"
    label.Size = UDim2.new(0, 200, 0, 50)
    label.Position = UDim2.new(0.5, -100, 0.1, 0)
    label.BackgroundTransparency = 1
    label.Font = Enum.Font.SourceSans
    label.TextScaled = true

    if role == "Murderer" then
        label.Text = "MURDERER"
        label.TextColor3 = Color3.new(1, 0, 0)
    elseif role == "Sheriff" then
        label.Text = "SHERIFF"
        label.TextColor3 = Color3.new(0, 0, 1)
    else
        label.Text = "INNOCENT"
        label.TextColor3 = Color3.new(0, 1, 0)
    end

    label.Parent = LP:WaitForChild("PlayerGui"):WaitForChild("MainGUI")
end

Library.addToggle(tab3, "Instant role", "", scriptEnabled, function(state)
    scriptEnabled = state
    getgenv().savedConfig.scriptEnabled = state
    getgenv().saveConfig(getgenv().savedConfig)

    if state then
        heartbeatConn = RunService.Heartbeat:Connect(function()
            if not LP.Character or not LP.Character:FindFirstChild("HumanoidRootPart") then return end

            local playerGui = LP:FindFirstChild("PlayerGui")
            local mainGui = playerGui and playerGui:FindFirstChild("MainGUI")
            local gameFrame = mainGui and mainGui:FindFirstChild("Game")
            local roleSelector = gameFrame and gameFrame:FindFirstChild("RoleSelector")
            if not roleSelector then return end

            if roleSelector.Visible and not wasVisible then
                wasVisible = true
                local role = getPlayerRole()
                if role then createRoleLabel(role) end
            elseif not roleSelector.Visible and wasVisible then
                wasVisible = false
                if label then label:Destroy() label = nil end
            end
        end)
    else
        if heartbeatConn then heartbeatConn:Disconnect() end
        heartbeatConn = nil
        wasVisible = false
        if label then label:Destroy() label = nil end
    end
end)

getgenv().ReplicatedStorage, getgenv().StarterGui, getgenv().Players, getgenv().toggleNotifications, getgenv().notificationsSent, lastRoles = game:GetService("ReplicatedStorage"), game:GetService("StarterGui"), game:GetService("Players"), false, { Murderer = false, Sheriff = false }, {}

local localPlayer, searching = getgenv().Players.LocalPlayer, false
local function sendNotification(player, role)
    if not getgenv().toggleNotifications then return end
    local playerObj, thumb = getgenv().Players:FindFirstChild(player), ""
    if playerObj then thumb = getgenv().Players:GetUserThumbnailAsync(playerObj.UserId, Enum.ThumbnailType.HeadShot, Enum.ThumbnailSize.Size100x100) end
    getgenv().StarterGui:SetCore("SendNotification", { Title = "Player Detected", Text = player .. " is " .. role, Icon = thumb, Duration = 5 })
    getgenv().notificationsSent[role], lastRoles[player] = true, role
end
local function getRoles()
    if not getgenv().toggleNotifications then return end
    local success, roles = pcall(function() return getgenv().ReplicatedStorage:FindFirstChild("GetPlayerData", true):InvokeServer() end)
    if not success or not roles then return end
    local murderFound, sheriffFound = false, false
    for player, info in pairs(roles) do
        if info.Role == "Murderer" then murderFound = true if not getgenv().notificationsSent.Murderer and lastRoles[player] ~= "Murderer" then sendNotification(player, "Murderer") end
        elseif info.Role == "Sheriff" then sheriffFound = true if not getgenv().notificationsSent.Sheriff and lastRoles[player] ~= "Sheriff" then sendNotification(player, "Sheriff") end end
    end
    if not murderFound then getgenv().notificationsSent.Murderer = false end
    if not sheriffFound then getgenv().notificationsSent.Sheriff = false end
end

local function startSearching()
    if searching then return end
    searching = true
    while getgenv().toggleNotifications do
        if localPlayer.Character and localPlayer.Character:FindFirstChild("Humanoid") and localPlayer.Character.Humanoid.Health > 0 then getRoles() end
        task.wait(2)
    end
    searching = false
end

localPlayer.CharacterAdded:Connect(function()
    wait(1)
    if localPlayer.Character and localPlayer.Character:FindFirstChild("Humanoid") then
        localPlayer.Character.Humanoid.Died:Connect(function() end)
    end
end)
Library.addToggle(tab3, "Role Notification", "notificaciÃ³n de roles", false, function(state)
    getgenv().toggleNotifications = state
    if state then task.spawn(startSearching) else getgenv().notificationsSent, lastRoles = { Murderer = false, Sheriff = false }, {} end
end)
Library.addLabel(tab3, "Gun Stuff")

getgenv().espConn = nil
getgenv().notifyConn = nil
getgenv().espActive = getgenv().savedConfig.espActive or false
getgenv().notifierEnabled = getgenv().savedConfig.notifierEnabled or false
getgenv().activeDrop = nil

local env = getgenv()

env.highlight = function(part)
    if not part:FindFirstChild("GunDropESPHighlight") then
        local h = Instance.new("Highlight")
        h.Name = "GunDropESPHighlight"
        h.FillColor = Color3.fromRGB(255, 0, 255)
        h.OutlineColor = Color3.fromRGB(255, 0, 255)
        h.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
        h.Parent = part
    end
    if not part:FindFirstChild("GunDropESPBillboard") then
        local b = Instance.new("BillboardGui")
        b.Name = "GunDropESPBillboard"
        b.Adornee = part
        b.Size = UDim2.new(0, 200, 0, 30)
        b.StudsOffset = Vector3.new(0, 5, 0)
        b.AlwaysOnTop = true
        b.Parent = part
        local t = Instance.new("TextLabel")
        t.Size = UDim2.new(1, 0, 1, 0)
        t.BackgroundTransparency = 1
        t.TextColor3 = Color3.fromRGB(255, 0, 255)
        t.Text = "GunDrop HERE"
        t.Font = Enum.Font.SourceSansBold
        t.TextSize = 20
        t.Parent = b
    end
    env.activeDrop = part
end

env.clear = function()
    local d = env.activeDrop
    if d then
        local h = d:FindFirstChild("GunDropESPHighlight")
        if h then h:Destroy() end
        local b = d:FindFirstChild("GunDropESPBillboard")
        if b then b:Destroy() end
        env.activeDrop = nil
    end
end

env.notify = function()
    game:GetService("StarterGui"):SetCore("SendNotification", {
        Title = "Gun Detected",
        Text = "GunDrop has appeared.",
        Duration = 5,
    })
end

Library.addToggle(tab3, "GunDrop ESP", "GunDrop ESP", env.espActive, function(state)
    env.espActive = state
    env.savedConfig.espActive = state
    env.saveConfig(env.savedConfig)
    if not state then
        if env.espConn then env.espConn:Disconnect() end
        env.espConn = nil
        env.clear()
        return
    end
    if env.espConn then return end
    local ex = workspace:FindFirstChild("GunDrop", true)
    if ex and ex:IsA("Part") then env.highlight(ex) end
    env.espConn = workspace.DescendantAdded:Connect(function(c)
        if c.Name == "GunDrop" and c:IsA("Part") then env.highlight(c) end
    end)
end)

Library.addToggle(tab3, "notifier Gun Drop", "notifier Gun Drop", env.notifierEnabled, function(state)
    env.notifierEnabled = state
    env.savedConfig.notifierEnabled = state
    env.saveConfig(env.savedConfig)
    if env.notifyConn then env.notifyConn:Disconnect() end
    env.notifyConn = nil
    if not state then return end
    local ex = workspace:FindFirstChild("GunDrop", true)
    if ex and ex:IsA("Part") then env.notify() end
    env.notifyConn = workspace.DescendantAdded:Connect(function(c)
        if c.Name == "GunDrop" and c:IsA("Part") then env.notify() end
    end)
end)

getgenv().enabled = getgenv().savedConfig.knifeESP or false

local function addHighlight(knife)
    if getgenv().enabled and not knife:FindFirstChild("Highlight") then
        local highlight = Instance.new("Highlight")
        highlight.FillColor = Color3.fromRGB(0, 200, 160)
        highlight.OutlineColor = Color3.fromRGB(0, 200, 160)
        highlight.FillTransparency = 0
        highlight.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
        highlight.OutlineTransparency = 0
        highlight.Adornee = knife
        highlight.Parent = knife
    end
end
workspace.DescendantAdded:Connect(function(descendant)
    if getgenv().enabled and descendant:IsA("Model") and descendant.Name == "ThrowingKnife" then
        addHighlight(descendant)
    end
end)
Library.addToggle(tab3, "See Thrown Knife", "", getgenv().enabled, function(state)
    getgenv().enabled = state
    getgenv().savedConfig.knifeESP = state
    getgenv().saveConfig(getgenv().savedConfig)

    if not state then
        for _, knife in ipairs(workspace:GetDescendants()) do
            if knife:IsA("Model") and knife.Name == "ThrowingKnife" then
                local highlight = knife:FindFirstChild("Highlight")
                if highlight then
                    highlight:Destroy()
                end
            end
        end
    end
end)
Library.addLabel(tab3, "Traps")
getgenv().removeTrap = getgenv().savedConfig.removeTrap or false
getgenv().seeTraps = getgenv().savedConfig.seeTraps or false

local Players = game:GetService("Players")
local localPlayer = Players.LocalPlayer

local function handleTrap(child)
    if child:IsA("Model") and child.Name == "Trap" then
        if getgenv().removeTrap then
            child:Destroy()
        elseif getgenv().seeTraps then
            if not child:FindFirstChild("TrapLabel") then
                local billboard = Instance.new("BillboardGui", child)
                billboard.Name = "TrapLabel"
                billboard.Size = UDim2.new(0, 100, 0, 50)
                billboard.Adornee = child:FindFirstChild("PrimaryPart") or child
                billboard.AlwaysOnTop = true
                local text = Instance.new("TextLabel", billboard)
                text.Size = UDim2.new(1, 0, 1, 0)
                text.Text = "Trap"
                text.BackgroundTransparency = 1
                text.TextColor3 = Color3.fromRGB(138, 43, 226)
                text.TextStrokeTransparency = 0
            end
        end
    end
end

local function onCharacterAdded(character)
    character.DescendantAdded:Connect(handleTrap)
    
    for _, child in ipairs(character:GetChildren()) do
        handleTrap(child)
    end
end

local function setupPlayer(player)
    if player ~= localPlayer then
        player.CharacterAdded:Connect(onCharacterAdded)
        if player.Character then
            onCharacterAdded(player.Character)
        end
    end
end

Players.PlayerAdded:Connect(setupPlayer)

for _, player in pairs(Players:GetPlayers()) do
    setupPlayer(player)
end

local function updateAllTraps()
    for _, player in pairs(Players:GetPlayers()) do
        if player ~= localPlayer and player.Character then
            for _, child in ipairs(player.Character:GetChildren()) do
                handleTrap(child)
            end
        end
    end
end

Library.addToggle(tab3, "Remove Traps", "destruir trampas", getgenv().removeTrap, function(state)
    getgenv().removeTrap = state
    getgenv().savedConfig.removeTrap = state
    getgenv().saveConfig(getgenv().savedConfig)
    updateAllTraps()
end)

Library.addToggle(tab3, "See Traps", "Ver trampas", getgenv().seeTraps, function(state)
    getgenv().seeTraps = state
    getgenv().savedConfig.seeTraps = state
    getgenv().saveConfig(getgenv().savedConfig)
    updateAllTraps()
    if not state then
        for _, player in pairs(Players:GetPlayers()) do
            if player ~= localPlayer and player.Character then
                for _, child in ipairs(player.Character:GetChildren()) do
                    if child:IsA("Model") and child.Name == "Trap" then
                        if child:FindFirstChild("TrapLabel") then
                            child.TrapLabel:Destroy()
                        end
                    end
                end
            end
        end
    end
end)

Library.addButton(tab3, "Place Trap (touch)", "", function()
if game.Players.LocalPlayer.Character ~= nil then
    local mouse = game.Players.LocalPlayer:GetMouse()
    tool = Instance.new("Tool")
    tool.RequiresHandle = false
    tool.Name = "Place Traps"
    tool.Activated:connect(function()
        local pos = mouse.Hit
        local args = {
            [1] = CFrame.new(pos.Position.X, pos.Position.Y, pos.Position.Z, 
                             0.7621428370475769, -6.621179160504198e-09, 0.6474089026451111, 
                             2.9349132013578583e-09, 1, 6.772159277801393e-09, 
                             -0.6474089026451111, -3.261263925580238e-09, 0.7621428370475769)
        }
        game:GetService("Players").LocalPlayer.Character.Trap.Activate:FireServer(unpack(args))
    end)
    tool.Parent = game.Players.LocalPlayer.Backpack
end
end)
Library.addButton(tab3, "Place Trap To the GunDrop pos", "", function()
local gunDrop = nil
for _, v in pairs(workspace:GetChildren()) do
    local temp = v:FindFirstChild("GunDrop")
    if temp then
        gunDrop = temp
        break
    end
end
if not gunDrop then return end

local args = {
    [1] = CFrame.new(gunDrop.Position.X, gunDrop.Position.Y, gunDrop.Position.Z, 
                     0.7621428370475769, -6.621179160504198e-09, 0.6474089026451111, 
                     2.9349132013578583e-09, 1, 6.772159277801393e-09, 
                     -0.6474089026451111, -3.261263925580238e-09, 0.7621428370475769)
}
game:GetService("Players").LocalPlayer.Character.Trap.Activate:FireServer(unpack(args))
end)
Library.addLabel(tab3, "round time")
local state = getgenv().savedConfig.showTimerGame or false
local timerThread = nil
local timerGui = nil

local function createTimerGui()
    if timerGui then
        timerGui:Destroy()
    end

    timerGui = Instance.new("ScreenGui")
    timerGui.Name = "TimerGui"
    timerGui.Parent = CoreGui

    local text = Instance.new("TextLabel")
    text.Name = "TimerText"
    text.BackgroundTransparency = 1
    text.TextColor3 = Color3.new(1, 1, 1)
    text.TextStrokeColor3 = Color3.new(0, 0, 0)
    text.TextStrokeTransparency = 0.5
    text.TextScaled = true
    text.AnchorPoint = Vector2.new(0.5, 0.5)
    text.Position = UDim2.new(0.5, 0, 0.1, 0)
    text.Size = UDim2.new(0, 200, 0, 50)
    text.Font = Enum.Font.GothamBold
    text.Text = "0:00"
    text.Parent = timerGui

    return text
end

local function updateTimer(text)
    while state do
        local success, timeLeft = pcall(function() 
            return ReplicatedStorage.Remotes.Extras.GetTimer:InvokeServer() 
        end)

        if not success or timeLeft <= 0 then
            text.Text = "0:00"
            for _ = 1, 3 do
                if not state then return end
                text.TextColor3 = Color3.new(1, 0, 0)
                task.wait(0.5)
                if not state then return end
                text.TextColor3 = Color3.new(1, 1, 1)
                task.wait(0.5)
            end
            repeat task.wait(1) until not state or ReplicatedStorage.Remotes.Extras.GetTimer:InvokeServer() > 0
        else
            text.Text = string.format("%d:%02d", timeLeft // 60, timeLeft % 60)
            text.TextColor3 = timeLeft <= 10 and Color3.new(1, 0, 0) or Color3.new(1, 1, 1)
        end
        task.wait(0.9)
    end
end

Library.addToggle(tab3, "Show Timer Game", "Ver tiempo de la ronda", state, function(toggleState)
    state = toggleState
    getgenv().savedConfig.showTimerGame = toggleState
    getgenv().saveConfig(getgenv().savedConfig)

    if state then
        local text = createTimerGui()
        timerThread = task.spawn(function() updateTimer(text) end)
    else
        if timerThread then
            state = false
            timerThread = nil
            if timerGui then
                timerGui:Destroy()
                timerGui = nil
            end
        end
    end
end)

Library.addLabel(tab3, "snitch role")

Library.addButton(tab3, "snitch who is the sheriff or murderer", "decir en el chat quien es murderer o sheriff", function()
local RS = game:GetService("ReplicatedStorage")
local TCS = game:GetService("TextChatService")
local data = RS:FindFirstChild("GetPlayerData", true):InvokeServer()
if not data then return end
local sheriff, murderer
for name, role in pairs(data) do
    if role.Role == "Murderer" then
        murderer = name
    elseif role.Role == "Sheriff" then
        sheriff = name
    end
end
if sheriff and murderer then
    TCS.TextChannels.RBXGeneral:SendAsync(sheriff .. " is the Sheriff and " .. murderer .. " is the Murderer.")
elseif murderer then
    TCS.TextChannels.RBXGeneral:SendAsync(murderer .. " is the Murderer.")
end
end)

Library.addButton(tab3, "Reset Cam", "resetear la cÃ¡mara", function()
local player = game:GetService("Players").LocalPlayer
local character = player.Character
if not character then return end
local humanoid = character:FindFirstChildWhichIsA('Humanoid')
if not humanoid then return end
local camera = workspace.CurrentCamera
camera.CameraType = Enum.CameraType.Custom
camera.CameraSubject = humanoid
player.CameraMinZoomDistance = 0.5
player.CameraMaxZoomDistance = 400
player.CameraMode = Enum.CameraMode.Classic
local head = character:FindFirstChild("Head")
if head then
    head.Anchored = false
end
end)

Library.addDropdown(tab3, "Fake Die", "Select an option", {"Lay On Back", "Sit Down"}, function(fakedie)
    local player = game:GetService("Players").LocalPlayer
    local character = player.Character
    local humanoid = character and character:FindFirstChildOfClass("Humanoid")

    if not humanoid then
        return
    end

    if fakedie == "Lay On Back" then
        humanoid.Sit = true
        task.wait(.1)
        local root = character:FindFirstChild("HumanoidRootPart")
        if root then
            root.CFrame = root.CFrame * CFrame.Angles(math.pi * 0.5, 0, 0)
        end
        for _, anim in ipairs(humanoid:GetPlayingAnimationTracks()) do
            anim:Stop()
        end
    elseif fakedie == "Sit Down" then
        humanoid.Sit = true
    end
end)

local function GetPlayerByRole(role)
    local roles = ReplicatedStorage:FindFirstChild("GetPlayerData", true):InvokeServer()
    for i, v in pairs(roles) do
        if v.Role == role then
            return Players:FindFirstChild(i)
        end
    end
    return nil
end

local function TeleportToRole(role)
    local rolePlayer = GetPlayerByRole(role)
    if rolePlayer and rolePlayer.Character and rolePlayer.Character:FindFirstChild("HumanoidRootPart") then
        local Character = Players.LocalPlayer.Character
        if Character then
            Character:SetPrimaryPartCFrame(rolePlayer.Character.HumanoidRootPart.CFrame)
        end
    end
end

local function ViewRole(role)
    local rolePlayer = GetPlayerByRole(role)
    if rolePlayer and rolePlayer.Character and rolePlayer.Character:FindFirstChild("HumanoidRootPart") then
        Camera.CameraSubject = rolePlayer.Character.Humanoid
        Camera.CFrame = rolePlayer.Character.HumanoidRootPart.CFrame
    end
end

Library.addLabel(tab3, "View Roles")

Library.addDropdown(tab3, "View Role", "See role", {"Murderer", "Sheriff", "Hero"}, function(selectedRole)
    ViewRole(selectedRole)
end)
Library.addButton(tab3, "Return to my camera", "regresar a mi cÃ¡mara", function()
    local LP = Players.LocalPlayer
    if LP.Character and LP.Character:FindFirstChild("HumanoidRootPart") then
        Camera.CameraSubject = LP.Character.Humanoid
        Camera.CFrame = LP.Character.HumanoidRootPart.CFrame
    end
end)

Library.addButton(tab4, "FAKE Fake bomb trick", "", function()
local player = game:GetService("Players").LocalPlayer
local coreGui, replicatedStorage = game:GetService("CoreGui"), game:GetService("ReplicatedStorage")
local gui = coreGui:FindFirstChild("bomb")
if gui then gui:Destroy() end
gui = Instance.new("ScreenGui", coreGui)
gui.Name = "bomb"
local btn = Instance.new("TextButton", gui)
btn.Size, btn.Position = UDim2.new(0, 100, 0, 100), UDim2.new(1, -110, 0, 10)
btn.Text, btn.Font, btn.TextSize, btn.TextColor3 = "Fake bomb trick", Enum.Font.Gotham, 14, Color3.new(1, 1, 1)
btn.BackgroundColor3, btn.BackgroundTransparency, btn.Draggable = Color3.new(0, 1, 0), 0.6, true
Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 15)
local canUse, cooldown = true, 22
local function reset()
    canUse, btn.BackgroundColor3, btn.Text = true, Color3.new(0, 1, 0), "Fake bomb trick"
end
local function useBomb()
    if not canUse then return end
    canUse, btn.BackgroundColor3 = false, Color3.new(1, 0, 0)
    local backpack, char = player:FindFirstChild("Backpack"), player.Character or player.CharacterAdded:Wait()
    local bomb = backpack:FindFirstChild("FakeBomb") or char:FindFirstChild("FakeBomb")
    if not bomb then
        replicatedStorage.Remotes.Extras.ReplicateToy:InvokeServer("FakeBomb")
        bomb = backpack:WaitForChild("FakeBomb") or char:WaitForChild("FakeBomb")
    end
    bomb.Parent = char
    if bomb:IsDescendantOf(char) then
        char:FindFirstChildOfClass("Humanoid"):ChangeState(Enum.HumanoidStateType.Jumping)
        game.Players.LocalPlayer.Character.Humanoid.JumpPower = 53
        bomb.Remote:FireServer(char.HumanoidRootPart.CFrame * CFrame.new(0, -3, 0), 50)
        task.wait(0.3)
        bomb.Parent = backpack
        game.Players.LocalPlayer.Character.Humanoid.JumpPower = 51
    end
    local start, currentChar = time(), player.Character
    while time() - start < cooldown do
        if player.Character ~= currentChar then reset() return end
        btn.Text = string.format("Cooldown: %ds", cooldown - math.floor(time() - start))
        task.wait(0.1)
    end
    reset()
end

btn.MouseButton1Click:Connect(useBomb)
player.CharacterAdded:Connect(reset)
reset()
end)

Library.addButton(tab4, "Wallhop", "", function()
getgenv().w = false getgenv().c = true getgenv().d = 5
local g = game:GetService("CoreGui"):FindFirstChild("wN") if g then return end
local s = Instance.new("ScreenGui") s.Name = "wN" s.Parent = game:GetService("CoreGui")
local b = Instance.new("TextButton") local u = Instance.new("UICorner") local a = Instance.new("Sound")
b.Name = "B" b.Size = UDim2.new(0, 50, 0, 50) b.Position = UDim2.new(0.5, -50, 0.5, -25) b.Text = "OFF" b.Font = Enum.Font.Gotham b.TextSize = 12 b.TextColor3 = Color3.fromRGB(255, 255, 255) b.BackgroundColor3 = Color3.fromRGB(200, 200, 200) b.BackgroundTransparency = 0.6 b.Draggable = true b.BorderSizePixel = 0 b.Parent = s
u.CornerRadius = UDim.new(0, 10) u.Parent = b
a.SoundId = "rbxassetid://1673280232" a.Parent = b
local function t() getgenv().w = not getgenv().w if getgenv().w then b.Text = "ON" b.BackgroundColor3 = Color3.fromRGB(0, 120, 0) else b.Text = "OFF" b.BackgroundColor3 = Color3.fromRGB(200, 209, 200) end
a:Play()
b:TweenSize(UDim2.new(0, 70, 0, 60), Enum.EasingDirection.Out, Enum.EasingStyle.Quad, 0.2, true)
task.wait(0.2)
b:TweenSize(UDim2.new(0, 50, 0, 50), Enum.EasingDirection.Out, Enum.EasingStyle.Quad, 0.2, true)
end
b.MouseButton1Click:Connect(t)
local p = game.Players.LocalPlayer local ps = game:GetService("Players") local i = game:GetService("UserInputService")
local function l() local x = {} for _, v in pairs(ps:GetPlayers()) do if v.Character then table.insert(x, v.Character) end end return x end
local function y(o, r) if not o then return false end local n = RaycastParams.new() n.FilterType = Enum.RaycastFilterType.Blacklist n.FilterDescendantsInstances = l() n.IgnoreWater = true local m = workspace:Raycast(o.Position, r * getgenv().d, n) return m and m.Instance ~= nil end
local function v(h) local j = h:FindFirstChildOfClass("Humanoid") local k = h:FindFirstChild("HumanoidRootPart") local e = h:FindFirstChild("Head") if not j or not k or not e then return end
i.JumpRequest:Connect(function()
    if not getgenv().w or not getgenv().c then return end getgenv().c = false  
    local f, r, l, q = k.CFrame.LookVector, k.CFrame.RightVector, -k.CFrame.RightVector, 0  
    local wf, wr, wl = y(k, f) or y(e, f), y(k, r) or y(e, r), y(k, l) or y(e, l)  
    q = (wf and wl or wl) and 60 or (wf and wr or wr) and -60 or 0  
    if q ~= 0 then k.CFrame = k.CFrame * CFrame.Angles(0, math.rad(q), 0) j:ChangeState(Enum.HumanoidStateType.Jumping) end  
    task.wait(0.2) getgenv().c = true  
end)
end
local function w(h) task.wait(0.5) v(h) end
if p.Character then v(p.Character) end
p.CharacterAdded:Connect(w)
end)

Library.addLabel(tab4, "Gun stuff")

Library.addDropdown(tab4, "GunDrop tp/tween", "Choose an action", {"Teleport to GunDrop", "Tween to GunDrop"}, function(selected)
    local success, err = pcall(function()
        local player = game:GetService("Players").LocalPlayer
        local character = player.Character
        if not character then return end
        local hrp = character:FindFirstChild("HumanoidRootPart")
        if not hrp then return end

        local gunDrop = nil
        for _, v in pairs(workspace:GetChildren()) do
            local temp = v:FindFirstChild("GunDrop")
            if temp then
                gunDrop = temp
                break
            end
        end
        if not gunDrop then return end

        local originalCFrame = hrp.CFrame

        if selected == "Teleport to GunDrop" then
            hrp.CFrame = gunDrop.CFrame
            task.wait(0.001)
            hrp.CFrame = originalCFrame

        elseif selected == "Tween to GunDrop" then
            local TweenService = game:GetService("TweenService")
            local distance = (gunDrop.Position - hrp.Position).Magnitude
            if distance < 10 then
                hrp.CFrame = gunDrop.CFrame
                task.wait(0.001)
                hrp.CFrame = originalCFrame
            else
                local direction = (gunDrop.Position - hrp.Position).Unit
                local targetPosition = gunDrop.Position - direction * 10
                local targetCFrame = CFrame.new(targetPosition, gunDrop.Position)
                local tweenInfo = TweenInfo.new((targetPosition - hrp.Position).Magnitude / 50, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
                local tween = TweenService:Create(hrp, tweenInfo, {CFrame = targetCFrame})
                tween:Play()
                tween.Completed:Connect(function()
                    hrp.CFrame = gunDrop.CFrame
                    task.wait(0.001)
                    hrp.CFrame = originalCFrame
                end)
            end
        end
    end)
    
    if not success then
        warn("Error en la ejecuciÃ³n: " .. tostring(err))
    end
end)

getgenv().stealBtn, getgenv().c1, getgenv().c2, getgenv().c3 = nil, nil, nil, nil
getgenv().fl, getgenv().ori, getgenv().ret, getgenv().tog = false, nil, false, true

Library.addToggle(tab4, "Steal gun", "", getgenv().savedConfig.stealGun or false, function(state)
    local Plr = game:GetService("Players")
    local Rs = game:GetService("RunService")
    local Ws = game:GetService("Workspace")
    local lp = Plr.LocalPlayer
    local cam = Ws.CurrentCamera

    local function stop()
        getgenv().fl = false
        if getgenv().c1 then getgenv().c1:Disconnect() getgenv().c1 = nil end
        if getgenv().c2 then getgenv().c2:Disconnect() getgenv().c2 = nil end
        if getgenv().c3 then getgenv().c3:Disconnect() getgenv().c3 = nil end
        local char = lp.Character
        if char then
            cam.CameraSubject = char:FindFirstChild("Humanoid")
        end
    end

    local function back()
        if getgenv().ret then return end
        getgenv().ret = true
        local hrp = lp.Character and lp.Character:FindFirstChild("HumanoidRootPart")
        if hrp and getgenv().ori then
            hrp.AssemblyLinearVelocity = Vector3.zero
            hrp.Velocity = Vector3.zero
            task.wait()
            hrp.CFrame = CFrame.new(getgenv().ori)
        end
        stop()
    end

    local function fling(p)
        local char = p.Character
        if not char then return end
        stop()
        getgenv().fl = true
        getgenv().ret = false

        local myChar = lp.Character
        local me = myChar and myChar:FindFirstChild("HumanoidRootPart")
        if not me then return end
        getgenv().ori = me.Position

        local tgt = char:FindFirstChild("HumanoidRootPart")
        if tgt then
            local hum = char:FindFirstChild("Humanoid")
            if hum then
                cam.CameraSubject = hum
            end
        end

        getgenv().c1 = Rs.Heartbeat:Connect(function()
            if not getgenv().fl then return end
            local h = lp.Character and lp.Character:FindFirstChild("HumanoidRootPart")
            if h then
                h.Velocity = Vector3.new(0, -9e7, 0)
                Rs.RenderStepped:Wait()
                h.Velocity = Vector3.new(0, -9e7, 0)
                Rs.Stepped:Wait()
                h.Velocity = Vector3.new(0, -2, 0)
            end
        end)

        getgenv().c2 = Rs.RenderStepped:Connect(function()
            if not getgenv().fl then return end
            local th = char:FindFirstChild("HumanoidRootPart")
            local me = lp.Character and lp.Character:FindFirstChild("HumanoidRootPart")
            if th and me then
                local off = getgenv().tog and 0.3 or -0.3
                getgenv().tog = not getgenv().tog
                local pred = 0.63
                local dir = th.CFrame.LookVector * off
                local pos = Vector3.new(
                    th.Position.X + th.Velocity.X * pred + dir.X,
                    th.Position.Y,
                    th.Position.Z + th.Velocity.Z * pred + dir.Z
                )
                me.CFrame = CFrame.new(pos) * CFrame.Angles(0, math.rad(90), 0)
            end
        end)

        getgenv().c3 = Rs.Heartbeat:Connect(function()
            if not getgenv().fl then return end
            local hum = char:FindFirstChild("Humanoid")
            local hrp = char:FindFirstChild("HumanoidRootPart")
            if (not hum or hum.Health <= 0) or (hrp and hrp.Velocity.Magnitude > 500) then
                back()
            end
        end)

        task.delay(5, function()
            if not getgenv().ret then
                back()
            end
        end)
    end

    if not state then
        if getgenv().stealBtn then
            getgenv().stealBtn.Visible = false
        end
        stop()
    else
        if not getgenv().stealBtn then
            local gui = lp:FindFirstChild("PlayerGui"):FindFirstChild("HFG")
            if gui then gui:Destroy() end
            gui = Instance.new("ScreenGui", lp:WaitForChild("PlayerGui"))
            gui.Name = "HFG"
            gui.ResetOnSpawn = false
            getgenv().stealBtn = Instance.new("TextButton", gui)
getgenv().stealBtn.Size = UDim2.new(0, 50, 0, 50)
getgenv().stealBtn.Position = UDim2.new(1, -285, 0, 10)
            getgenv().stealBtn.Text = "Gun Steal"
            getgenv().stealBtn.Font = Enum.Font.Gotham
            getgenv().stealBtn.TextSize = 10
            getgenv().stealBtn.TextColor3 = Color3.new(1, 1, 1)
            getgenv().stealBtn.BackgroundColor3 = Color3.fromRGB(200, 200, 200)
            getgenv().stealBtn.BackgroundTransparency = 0.7
            getgenv().stealBtn.Draggable = true
            getgenv().stealBtn.AutoButtonColor = true
            local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 8)
corner.Parent = stealBtn

local borderFrame = Instance.new("Frame")
borderFrame.Size = UDim2.new(1, 0, 1, 0)
borderFrame.Position = UDim2.new(0, 0, 0, 0)
borderFrame.BackgroundTransparency = 1
borderFrame.ZIndex = stealBtn.ZIndex + 1
borderFrame.Parent = stealBtn

local borderStroke = Instance.new("UIStroke")
borderStroke.Thickness = 2
borderStroke.Color = Color3.fromRGB(180, 180, 180)
borderStroke.Parent = borderFrame

local frameCorner = Instance.new("UICorner")
frameCorner.CornerRadius = UDim.new(0, 10)
frameCorner.Parent = borderFrame

            getgenv().stealBtn.MouseButton1Click:Connect(function()
                if getgenv().fl then return end
                for _, p in ipairs(Plr:GetPlayers()) do
                    if p ~= lp then
                        local bp, ch = p:FindFirstChild("Backpack"), p.Character
                        local has = (bp and bp:FindFirstChild("Gun")) or (ch and ch:FindFirstChild("Gun"))
                        if has and ch and ch:FindFirstChild("HumanoidRootPart") then
                            fling(p)
                            break
                        end
                    end
                end
            end)
        end
        getgenv().stealBtn.Visible = true
    end
    getgenv().savedConfig.stealGun = state
    getgenv().saveConfig(getgenv().savedConfig)
end)

local player    = game.Players.LocalPlayer
local coreGui   = game:GetService("CoreGui")
local workspace = game:GetService("Workspace")

local function touch(a, b)
    firetouchinterest(a, b, 0)
    firetouchinterest(a, b, 1)
end

Library.addToggle(tab4, "Bring Gun/(button)", "", getgenv().savedConfig.bringGun or false, function(s)
    getgenv().savedConfig.bringGun = s
    getgenv().saveConfig(getgenv().savedConfig)
    local g = coreGui:FindFirstChild("TPGUN")
    if g then g:Destroy() end
    if s then
        local sg = Instance.new("ScreenGui", coreGui)
        sg.Name = "TPGUN"
        local btn = Instance.new("TextButton")
        btn.Name = "TPGUNButton"
        btn.Text = "Bring Gun"
        btn.Position = UDim2.new(1, -230, 0, 10)
btn.Size = UDim2.new(0, 60, 0, 50)
        btn.BackgroundTransparency = 0.5
        btn.BackgroundColor3 = Color3.fromRGB(200, 200, 200)
        btn.TextColor3 = Color3.new(1,1,1)
        btn.Draggable = true
        local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 8)
corner.Parent = btn

local borderFrame = Instance.new("Frame")
borderFrame.Size = UDim2.new(1, 0, 1, 0)
borderFrame.Position = UDim2.new(0, 0, 0, 0)
borderFrame.BackgroundTransparency = 1
borderFrame.ZIndex = btn.ZIndex + 1
borderFrame.Parent = btn

local borderStroke = Instance.new("UIStroke")
borderStroke.Thickness = 2
borderStroke.Color = Color3.fromRGB(180, 180, 180)
borderStroke.Parent = borderFrame

local frameCorner = Instance.new("UICorner")
frameCorner.CornerRadius = UDim.new(0, 10)
frameCorner.Parent = borderFrame
        btn.Parent = sg
        btn.MouseButton1Click:Connect(function()
            local c = player.Character
            local r = c and c:FindFirstChild("HumanoidRootPart")
            local d = workspace:FindFirstChild("GunDrop", true)
            if r and d then touch(r, d) end
        end)
    end
end)

do
    local c1, c2
    Library.addToggle(tab4, "Auto grab Gun", "", getgenv().savedConfig.autoGrabGun or false, function(s)
        getgenv().savedConfig.autoGrabGun = s
        getgenv().saveConfig(getgenv().savedConfig)
        if c1 then c1:Disconnect() c1=nil end
        if c2 then c2:Disconnect() c2=nil end
        if s then
            local function tt(d)
                task.wait(.1)
                local c = player.Character
                local r = c and c:FindFirstChild("HumanoidRootPart")
                if r and d:IsA("BasePart") then touch(r, d) end
            end
            c1 = workspace.ChildAdded:Connect(function(x) if x.Name=="GunDrop" then tt(x) end end)
            c2 = workspace.DescendantAdded:Connect(function(x) if x.Name=="GunDrop" then tt(x) end end)
            for _,x in ipairs(workspace:GetDescendants()) do if x.Name=="GunDrop" then tt(x) end end
        end
    end)
end

do
    local c1, c2
    Library.addToggle(tab4, "Gun Aura", "", getgenv().savedConfig.gunAura or false, function(s)
        getgenv().savedConfig.gunAura = s
        getgenv().saveConfig(getgenv().savedConfig)
        if c1 then c1:Disconnect() c1=nil end
        if c2 then c2:Disconnect() c2=nil end
        if s then
            local function aura()
                while s do
                    task.wait(0.7)
                    local c = player.Character
                    local r = c and c:FindFirstChild("HumanoidRootPart")
                    local d = workspace:FindFirstChild("GunDrop", true)
                    if r and d and d:IsA("BasePart") and (r.Position - d.Position).Magnitude <= 10 then
                        touch(r, d)
                    end
                end
            end
            c1 = task.spawn(aura)
        end
    end)
end

do
    local c
    Library.addToggle(tab4, "View Drop Gun", "", getgenv().savedConfig.viewDropGun or false, function(s)
        getgenv().savedConfig.viewDropGun = s
        getgenv().saveConfig(getgenv().savedConfig)
        if c then c:Disconnect() c=nil end
        if not s then
            workspace.CurrentCamera.CameraSubject = player.Character and player.Character:FindFirstChild("Humanoid") or player
        else
            c = workspace.DescendantAdded:Connect(function(x)
                if x.Name=="GunDrop" and x:IsA("BasePart") then
                    workspace.CurrentCamera.CameraSubject = x
                end
            end)
            local ex = workspace:FindFirstChild("GunDrop", true)
            if ex then workspace.CurrentCamera.CameraSubject = ex end
        end
    end)
end

getgenv().p = game.Players.LocalPlayer

local gui = Instance.new("ScreenGui")
gui.Name = "TeleportGui"
gui.ResetOnSpawn = false
gui.Parent = p:WaitForChild("PlayerGui")

local btn = Instance.new("TextButton")
btn.Name = "TeleportButton"
btn.Size = UDim2.new(0, 50, 0, 50)
btn.Position = UDim2.new(1, -220 - 50 - 10 - 50 - 10, 0, 10)
btn.Text = "Teleport to \n Last Death"
btn.Font = Enum.Font.Gotham
btn.TextSize = 10
btn.TextColor3 = Color3.new(1, 1, 1)
btn.BackgroundColor3 = Color3.fromRGB(200, 200, 200)
btn.BackgroundTransparency = 0.6
btn.Draggable = true
btn.Parent = gui
local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 8)
corner.Parent = btn

local borderFrame = Instance.new("Frame")
borderFrame.Size = UDim2.new(1, 0, 1, 0)
borderFrame.Position = UDim2.new(0, 0, 0, 0)
borderFrame.BackgroundTransparency = 1
borderFrame.ZIndex = btn.ZIndex + 1
borderFrame.Parent = btn

local borderStroke = Instance.new("UIStroke")
borderStroke.Thickness = 2
borderStroke.Color = Color3.fromRGB(180, 180, 180)
borderStroke.Parent = borderFrame

local frameCorner = Instance.new("UICorner")
frameCorner.CornerRadius = UDim.new(0, 10)
frameCorner.Parent = borderFrame

getgenv().lastPos = getgenv().savedConfig.lastPos or nil
getgenv().toggleOn = getgenv().savedConfig.tpAtLastDeath or false

local function recordPos()
    if p.Character and p.Character:FindFirstChild("HumanoidRootPart") then
        getgenv().lastPos = p.Character.HumanoidRootPart.CFrame
        getgenv().savedConfig.lastPos = getgenv().lastPos
        getgenv().saveConfig(getgenv().savedConfig)
    end
end

local function onDeath()
    recordPos()
end

local function onAdd(c)
    local hum = c:WaitForChild("Humanoid", 3)
    if hum then
        hum.Died:Connect(onDeath)
    end
end

p.CharacterAdded:Connect(onAdd)
if p.Character then
    onAdd(p.Character)
end

Library.addToggle(tab4, "tp at the Last Death", "teletransportarse a la Ãºltima posiciÃ³n de la muerte", getgenv().toggleOn, function(state)
    getgenv().toggleOn = state
    getgenv().savedConfig.tpAtLastDeath = state
    getgenv().saveConfig(getgenv().savedConfig)
    btn.Visible = state
end)

btn.MouseButton1Click:Connect(function()
    if not getgenv().toggleOn then return end
    if not getgenv().lastPos then
        btn.Text = "No death position!"
        task.wait(2)
        btn.Text = "Teleport to \n Last Death"
        return
    end
    if p.Character and p.Character:FindFirstChild("HumanoidRootPart") then
        p.Character.HumanoidRootPart.CFrame = getgenv().lastPos
    else
        btn.Text = "No character found!"
        task.wait(2)
        btn.Text = "Teleport to \n Last Death"
    end
end)

Library.addLabel(tab4, "Teleport To A Specific Location")

Library.addDropdown(tab4, "Go to", "Lobby", {"Lobby", "Vote Map", "Go to Map", "Void (Safe)"}, function(selectedOption)
    if selectedOption == "Lobby" then
        local hrp = game.Players.LocalPlayer.Character and game.Players.LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
        local spawns = workspace.Lobby.Spawns:GetChildren()

        if hrp and #spawns > 0 then
            hrp.CFrame = spawns[math.random(#spawns)].CFrame + Vector3.new(0, 3, 0)
        end
    elseif selectedOption == "Vote Map" then
        game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(-109, 141, 88)
    elseif selectedOption == "Go to Map" then
        for _, v in ipairs(workspace:GetDescendants()) do
            if v.Name == "Spawn" or v.Name == "PlayerSpawn" then
                game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(v.Position) * CFrame.new(0, 2.5, 0)
            end
        end
    elseif selectedOption == "Void (Safe)" then
        local player = game.Players.LocalPlayer
        local character = player.Character or player.CharacterAdded:Wait()
        local hrp = character:WaitForChild("HumanoidRootPart")

        local teleportPosition = CFrame.new(-74, 6, 693)
        hrp.CFrame = teleportPosition * CFrame.new(0, 3, 0)
    end
end)

Library.addLabel(tab4, "teleport a role player")

Library.addDropdown(tab4, "Teleport to", "role", {"Sheriff", "Murderer", "Hero"}, function(selectedRole)
    TeleportToRole(selectedRole)
end)

local lp = game.Players.LocalPlayer

local function getClosestPlayer()
    local closest, distance = nil, math.huge
    local lpRoot = lp.Character and lp.Character:FindFirstChild("HumanoidRootPart")
    if not lpRoot then return nil end

    for _, player in ipairs(game.Players:GetPlayers()) do
        if player ~= lp and player.Character then
            local root = player.Character:FindFirstChild("HumanoidRootPart")
            if root then
                local d = (lpRoot.Position - root.Position).Magnitude
                if d < distance then closest, distance = player, d end
            end
        end
    end
    return closest
end

local function getRandomPlayer()
    local players = {}
    for _, player in ipairs(game.Players:GetPlayers()) do
        if player ~= lp then table.insert(players, player) end
    end
    return #players > 0 and players[math.random(1, #players)] or nil
end

local function teleportTo(option)
    local target = option == "Random Player" and getRandomPlayer() or getClosestPlayer()
    if target and target.Character then
        local targetRoot = target.Character:FindFirstChild("HumanoidRootPart")
        local lpRoot = lp.Character and lp.Character:FindFirstChild("HumanoidRootPart")
        if targetRoot and lpRoot then lpRoot.CFrame = targetRoot.CFrame end
    end
end

Library.addDropdown(tab4, "Teleport to", "players", {"Random Player", "Closest Player"}, function(option) teleportTo(option) end)
Library.addLabel(tab4, "Teleport")
Library.addLabel(tab10, "Optimization (maybe more lag than normal)")

getgenv().antiLag = false
getgenv().removeRaggy = false
getgenv().destroyCoins = false
getgenv().removeBarrier = false
getgenv().targetModels = {"Raggy", "GlitchProof"}

local opt = {
    coinConnections = {},
    coinContainerConnection = nil
}

function opt.destroyTargetModels()
    for _, obj in ipairs(Workspace:GetDescendants()) do
        if obj:IsA("Model") and table.find(getgenv().targetModels, obj.Name) then
            obj:Destroy()
        end
    end
end

function opt.getCoinContainer()
    return Workspace:FindFirstChild("CoinContainer", true)
end

function opt.attachCoinListener(coin)
    if opt.coinConnections[coin] then return end
    local conn = coin.Touched:Connect(function(hit)
        if not getgenv().destroyCoins then return end
        local character = hit.Parent
        if character and Players:GetPlayerFromCharacter(character) then
            if conn.Connected then conn:Disconnect() end
            opt.coinConnections[coin] = nil
            task.wait(0.1)
            if coin and coin.Parent then coin:Destroy() end
        end
    end)
    opt.coinConnections[coin] = conn
end

function opt.detachAllCoinListeners()
    for coin, conn in pairs(opt.coinConnections) do
        if conn.Connected then conn:Disconnect() end
    end
    opt.coinConnections = {}
    if opt.coinContainerConnection then
        opt.coinContainerConnection:Disconnect()
        opt.coinContainerConnection = nil
    end
end

function opt.monitorCoins()
    local container = opt.getCoinContainer()
    if container then
        for _, coin in ipairs(container:GetChildren()) do
            if coin.Name == "Coin_Server" and coin:IsA("BasePart") then
                opt.attachCoinListener(coin)
            end
        end
        opt.coinContainerConnection = container.ChildAdded:Connect(function(child)
            if child.Name == "Coin_Server" and child:IsA("BasePart") then
                opt.attachCoinListener(child)
            end
        end)
    end
end

function opt.clearLag()
    for _, folder in ipairs(Workspace:GetChildren()) do
        if folder:IsA("Folder") and table.find({"Footsteps", "WeaponDisplays"}, folder.Name) then
            folder:Destroy()
        end
    end
    for _, player in ipairs(Players:GetPlayers()) do
        local character = player.Character
        if character then
            for _, item in ipairs({"KnifeDisplay", "GunDisplay", "Pet"}) do
                local targetItem = character:FindFirstChild(item)
                if targetItem then targetItem:Destroy() end
            end
            for _, tool in ipairs(character:GetChildren()) do
                if tool:IsA("Tool") then
                    local chroma = tool:FindFirstChild("Handle") and tool.Handle:FindFirstChild("Chroma")
                    if chroma then chroma:Destroy() end
                end
            end
        end
    end
    for _, child in ipairs(Workspace:GetChildren()) do
        if child:IsA("Model") or child:IsA("Part") then
            local chroma = child:FindFirstChild("Handle") and child.Handle:FindFirstChild("Chroma")
            if chroma then chroma:Destroy() end
        end
    end
end

function opt.monitorAntiLag()
    while true do
        if getgenv().antiLag then opt.clearLag() end
        task.wait(1)
    end
end

task.spawn(opt.monitorAntiLag)

Workspace.ChildAdded:Connect(function(child)
    if getgenv().antiLag then
        if child:IsA("Folder") and table.find({"Footsteps", "WeaponDisplays"}, child.Name) then
            child:Destroy()
        elseif child:IsA("Model") or child:IsA("Part") then
            local chroma = child:FindFirstChild("Handle") and child.Handle:FindFirstChild("Chroma")
            if chroma then chroma:Destroy() end
        end
    end
    if getgenv().removeBarrier and child:IsA("Model") and child.Name == "GlitchProof" then
        child:Destroy()
    end
end)

Players.PlayerAdded:Connect(function(newPlayer)
    newPlayer.CharacterAdded:Connect(function(character)
        if getgenv().antiLag then opt.clearLag() end
    end)
end)

Library.addToggle(tab10, "optimization", "optimizaciÃ³n", false, function(state)
    getgenv().antiLag = state
end)

Library.addToggle(tab10, "Destroy dead body", "destruir cadÃ¡veres", false, function(state)
    getgenv().removeRaggy = state
    if state then opt.destroyTargetModels() end
end)

Library.addToggle(tab10, "Destroy coins", "destruir monedas", false, function(state)
    getgenv().destroyCoins = state
    if state then
        opt.monitorCoins()
    else
        opt.detachAllCoinListeners()
    end
end)

Library.addToggle(tab10, "Remove Barrier", "remover barrera", false, function(state)
    getgenv().removeBarrier = state
    if state then opt.destroyTargetModels() end
end)

Library.addToggle(tab10, "Remove shadow", "remover sombras", false, function(state)
    game.Lighting.GlobalShadows = not state
end)

Library.addToggle(tab10, "Remove players Accessory", "remover jugadores Accesorio", false, function(state)
    if state then
        for _, player in pairs(game:GetService("Players"):GetPlayers()) do
            if player ~= game:GetService("Players").LocalPlayer then
                if player.Character then
                    for _, accessory in pairs(player.Character:GetChildren()) do
                        if accessory:IsA("Accessory") then
                            accessory:Destroy()
                        end
                    end
                end
            end
        end
    end
end)

local lighting = game:GetService("Lighting")
local affectedObjects = {}

Library.addToggle(tab10, "Less lag optimization", "menos lag", false, function(state)
    if state then
        lighting.GlobalShadows = false
        lighting.FogEnd = 9e9
        
        for _, v in pairs(workspace:GetDescendants()) do
            if v:IsA("ParticleEmitter") or v:IsA("Trail") then
                affectedObjects[v] = v.Enabled
                v.Enabled = false
            end
        end
    else
        lighting.GlobalShadows = true
        lighting.FogEnd = 100000
        
        for obj, wasEnabled in pairs(affectedObjects) do
            if obj and obj.Parent then
                obj.Enabled = wasEnabled
            end
        end
        
        affectedObjects = {}
    end
end)

Library.addButton(tab10, "Fps Booster (maybe more lag than normal)", "fps refuerzo (talvez de mÃ¡s lag de lo normal)", function()
loadstring(game:HttpGet("https://pastebin.com/raw/xW41aVkt"))()
end)

Library.addButton(tab10, "lower cpu load", "", function()
local ToDisable = {
	Textures = false,
	VisualEffects = true,
	Parts = true,
	Particles = true,
	Sky = true
}
local ToEnable = {
	FullBright = true
}
local Stuff = {}
for _, v in next, game:GetDescendants() do
	if ToDisable.Parts then
		if v:IsA("Part") or v:IsA("Union") or v:IsA("BasePart") then
			v.Material = Enum.Material.SmoothPlastic
			table.insert(Stuff, v)
		end
	end
	
	if ToDisable.Particles then
		if v:IsA("ParticleEmitter") or v:IsA("Smoke") or v:IsA("Explosion") or v:IsA("Sparkles") or v:IsA("Fire") then
			v.Enabled = false
			table.insert(Stuff, v)
		end
	end
	
	if ToDisable.VisualEffects then
		if v:IsA("BloomEffect") or v:IsA("BlurEffect") or v:IsA("DepthOfFieldEffect") or v:IsA("SunRaysEffect") then
			v.Enabled = false
			table.insert(Stuff, v)
		end
	end
	
	if ToDisable.Textures then
		if v:IsA("Decal") or v:IsA("Texture") then
			v.Texture = ""
			table.insert(Stuff, v)
		end
	end
	
	if ToDisable.Sky then
		if v:IsA("Sky") then
			v.Parent = nil
			table.insert(Stuff, v)
		end
	end
end
if ToEnable.FullBright then
	game.Lighting.Brightness = -1
	game.Lighting.OutdoorAmbient = Color3.fromRGB(255, 255, 255)
end
end)

getgenv().D3RenderingDisabled = getgenv().savedConfig.renderizado or false

Library.addToggle(tab5, "Disable 3D rendering", "Desabilitar 3d renderizando", getgenv().savedConfig.renderizado or false, function(state)
    getgenv().savedConfig.renderizado = state
    getgenv().saveConfig(getgenv().savedConfig)

    if not getgenv().D3RenderingDisabled and state then
        getgenv().D3RenderingDisabled = true
        RunService:Set3dRenderingEnabled(false)
    elseif getgenv().D3RenderingDisabled and not state then
        getgenv().D3RenderingDisabled = false
        RunService:Set3dRenderingEnabled(true)
    end
end)

Library.addLabel(tab5, "tween autofarm")

local TweenService = game:GetService("TweenService")
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local VirtualUser = game:GetService("VirtualUser")
local Plr = game:GetService("Players")
local lp   = Plr.LocalPlayer
local cam  = workspace.CurrentCamera

Players.LocalPlayer.Idled:Connect(function()
	VirtualUser:CaptureController()
	VirtualUser:ClickButton2(Vector2.new(0, 0))
end)

local LocalPlayer = cloneref(Players.LocalPlayer)
local Roles = {}
local FloatPart
local currentContainer
local visited = {}
local moving = false

getgenv().AutoFarmEnabled    = getgenv().savedConfig.AutoFarmEnabled    or false
getgenv().ResetBagWhenFull   = getgenv().savedConfig.ResetBagWhenFull   or false
getgenv().Endround           = getgenv().savedConfig.Endround           or false
getgenv().RandomCoin         = getgenv().savedConfig.RandomCoin         or false
getgenv().TweenSpeed         = getgenv().savedConfig.TweenSpeed         or 24
getgenv().CoinDelay          = getgenv().savedConfig.CoinDelay          or 0.3
getgenv().AutoFarmMode       = getgenv().savedConfig.AutoFarmMode       or "Below the map"

Roles.RoleTable = { [LocalPlayer.Name] = { Dead = false } }
function Roles:IsAlive(player)
    local data = self.RoleTable[player.Name]
    return data and not data.Dead
end

local Plr = game:GetService("Players")
local lp  = Plr.LocalPlayer

Library.addToggle(tab5, "Auto Farm", "", getgenv().AutoFarmEnabled, function(on)
    getgenv().AutoFarmEnabled = on
    getgenv().savedConfig.AutoFarmEnabled = on
    getgenv().saveConfig(getgenv().savedConfig)
    if on then
        visited = {}
        currentContainer = nil
    else
        if FloatPart then FloatPart:Destroy() end
        FloatPart = nil
        visited = {}
        for _, v in ipairs(workspace:GetDescendants()) do
            if v:IsA("BasePart") and (v.Name=="Spawn" or v.Name=="PlayerSpawn") and v.Parent.Name~="Lobby" then
                local hrp = lp.Character and lp.Character:FindFirstChild("HumanoidRootPart")
                if hrp then
                    hrp.CFrame = CFrame.new(v.Position) * CFrame.new(0,2.5,0)
                end
                break
            end
        end
    end
end)

Library.addToggle(tab5, "ResetBagWhenFull", "", getgenv().ResetBagWhenFull, function(on)
    getgenv().ResetBagWhenFull = on
    getgenv().savedConfig.ResetBagWhenFull = on
    getgenv().saveConfig(getgenv().savedConfig)
end)

Library.addToggle(tab5, "Endround (fling murderer)", "", getgenv().Endround, function(on)
    getgenv().Endround = on
    getgenv().savedConfig.Endround = on
    getgenv().saveConfig(getgenv().savedConfig)
end)

Library.addToggle(tab5, "Random Coin", "", getgenv().RandomCoin, function(on)
    getgenv().RandomCoin = on
    getgenv().savedConfig.RandomCoin = on
    getgenv().saveConfig(getgenv().savedConfig)
end)

Library.addSlider(tab5, "Tween Speed", "", 1, 30, getgenv().TweenSpeed, function(v)
    getgenv().TweenSpeed = v
    getgenv().savedConfig.TweenSpeed = v
    getgenv().saveConfig(getgenv().savedConfig)
end)

Library.addSlider(tab5, "Delay to move to the next coin", "", 0, 20, getgenv().CoinDelay * 10, function(v)
    local d = v/10
    getgenv().CoinDelay = d
    getgenv().savedConfig.CoinDelay = d
    getgenv().saveConfig(getgenv().savedConfig)
end)

Library.addDropdown(tab5, "Autofarm Mode", getgenv().AutoFarmMode, {"Normal","Below the map"}, function(opt)
    getgenv().AutoFarmMode = opt
    getgenv().savedConfig.AutoFarmMode = opt
    getgenv().saveConfig(getgenv().savedConfig)
end)

local function createFloatPart()
    if FloatPart then FloatPart:Destroy() end
    visited = {}
    local hrp = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
    if not hrp then return end
    local folder = Instance.new("Folder", workspace)
    FloatPart = Instance.new("Part", folder)
    FloatPart.Size = Vector3.new(1,1,1)
    FloatPart.Transparency = 1
    FloatPart.Anchored = true
    FloatPart.Massless = true
    FloatPart.CanCollide = true
    FloatPart.CastShadow = false
    FloatPart.CFrame = hrp.CFrame * CFrame.Angles(math.rad(90),0,0)
end

workspace.DescendantAdded:Connect(function(inst)
    if not getgenv().AutoFarmEnabled then return end
    if inst.Name == "CoinContainer" and inst ~= currentContainer then
        currentContainer = inst
        createFloatPart()
    end
end)

LocalPlayer.CharacterAdded:Connect(function()
    visited = {}
    currentContainer = nil
    if FloatPart then FloatPart:Destroy() end
    FloatPart = nil
end)

local function getCoins()
    local coins = {}
    if currentContainer then
        for _, c in ipairs(currentContainer:GetChildren()) do
            if c:IsA("BasePart") and not visited[c] then
                c.Size = Vector3.new(5,6,5)
                table.insert(coins, c)
            end
        end
    end
    return coins
end

local function getRandomCoin()
    local candidates = {}
    for _, coin in ipairs(getCoins()) do
        if (coin.Position - FloatPart.Position).Magnitude <= 80 then
            table.insert(candidates, coin)
        end
    end
    return #candidates > 0 and candidates[math.random(#candidates)] or nil
end

local function getNextCoin()
    if getgenv().RandomCoin then
        return getRandomCoin()
    else
        local best, dist
        for _, coin in ipairs(getCoins()) do
            local d = (coin.Position - FloatPart.Position).Magnitude
            if not best or d < dist then
                best, dist = coin, d
            end
        end
        return best, dist
    end
end

local function isBagFull()
    local gui = LocalPlayer:FindFirstChild("PlayerGui")
    if not gui then return false end
    local mainGui = gui:FindFirstChild("MainGUI")
    if not mainGui then return false end
    local lobby = mainGui:FindFirstChild("Lobby")
    if not lobby then return false end
    local dock = lobby:FindFirstChild("Dock")
    if not dock then return false end
    local bags = dock:FindFirstChild("CoinBags")
    if not bags then return false end
    local container = bags:FindFirstChild("Container")
    if not container then return false end
    local coin = container:FindFirstChild("Coin")
    if not coin then return false end
    local full = coin:FindFirstChild("Full")
    if not full then return false end
    return full.Visible
end

local lastTeleportTime = 0

local function moveToNext()
    if not getgenv().AutoFarmEnabled or not FloatPart then return end
    if not Roles:IsAlive(LocalPlayer) then return end

    if isBagFull() then
        if getgenv().ResetBagWhenFull then
            if getgenv().Endround then
                local fl, ori, c1, c2, c3, ret, tog = false, nil, nil, nil, nil, false, true
                local targetPlayer, targetOriPos

                local function stop()
                    fl = false
                    if c1 then c1:Disconnect() c1 = nil end
                    if c2 then c2:Disconnect() c2 = nil end
                    if c3 then c3:Disconnect() c3 = nil end
                    local char = lp.Character
                    if char then cam.CameraSubject = char:FindFirstChild("Humanoid") end
                end

                local function back()
                    if ret then return end
                    ret = true
                    local hrp = lp.Character and lp.Character:FindFirstChild("HumanoidRootPart")
                    if hrp and ori then
                        hrp.AssemblyLinearVelocity = Vector3.zero
                        hrp.Velocity = Vector3.zero
                        task.wait()
                        hrp.CFrame = CFrame.new(ori)
                    end
                    stop()
                end

                local function fling(p)
                    if FloatPart then FloatPart:Destroy() end
                    FloatPart = nil
                    stop()
                    fl = true
                    ret = false
                    targetPlayer = p

                    local me = lp.Character and lp.Character:FindFirstChild("HumanoidRootPart")
                    if not me then return end
                    ori = me.Position

                    local char = p.Character
                    local hrp = char and char:FindFirstChild("HumanoidRootPart")
                    local hum = char and char:FindFirstChild("Humanoid")
                    if not hrp or not hum then return end
                    targetOriPos = hrp.Position
                    cam.CameraSubject = hum
                    local Rs = game:GetService("RunService")

                    c1 = Rs.Heartbeat:Connect(function()
                        if not fl then return end
                        local h = lp.Character and lp.Character:FindFirstChild("HumanoidRootPart")
                        if h then
                            h.Velocity = Vector3.new(0, -9e7, 0)
                            Rs.RenderStepped:Wait()
                            h.Velocity = Vector3.new(0, -9e7, 0)
                            Rs.Stepped:Wait()
                            h.Velocity = Vector3.new(0, -2, 0)
                        end
                    end)

                    c2 = Rs.RenderStepped:Connect(function()
                        if not fl then return end
                        local th = hrp
                        local me = lp.Character and lp.Character:FindFirstChild("HumanoidRootPart")
                        if th and me then
                            local off = tog and 0.3 or -0.3
                            tog = not tog
                            local pred = 0.63
                            local dir = th.CFrame.LookVector * off
                            local pos = Vector3.new(
                                th.Position.X + th.Velocity.X * pred + dir.X,
                                th.Position.Y,
                                th.Position.Z + th.Velocity.Z * pred + dir.Z
                            )
                            me.CFrame = CFrame.new(pos) * CFrame.Angles(0, math.rad(90), 0)
                        end
                    end)

                    c3 = Rs.Heartbeat:Connect(function()
                        if not fl then return end
                        local ch = targetPlayer.Character
                        local th = ch and ch:FindFirstChild("HumanoidRootPart")
                        local hu = ch and ch:FindFirstChild("Humanoid")
                        local velCheck = th and th.Velocity.Magnitude > 1000
                        local disCheck = th and (th.Position - targetOriPos).Magnitude > 50
                        if not hu or hu.Health <= 0 or velCheck or disCheck then
                            back()
                        end
                    end)

                    LocalPlayer.CharacterAdded:Once(function()
                        visited = {}
                        currentContainer = nil
                        if FloatPart then FloatPart:Destroy() end
                        FloatPart = nil

                        local monitor
                        monitor = Rs.Heartbeat:Connect(function()
                            local ch = targetPlayer and targetPlayer.Character
                            local th = ch and ch:FindFirstChild("HumanoidRootPart")
                            local hu = ch and ch:FindFirstChild("Humanoid")
                            local velCheck = th and th.Velocity.Magnitude > 1000
                            local disCheck = th and (th.Position - targetOriPos).Magnitude > 50
                            if not targetPlayer or not ch or not hu or hu.Health <= 0 or velCheck or disCheck then
                                monitor:Disconnect()
                                moveToNext()
                            end
                        end)
                    end)
                end

                if fl then return end
                for _, p in ipairs(Plr:GetPlayers()) do
                    if p ~= lp then
                        local bp, ch = p:FindFirstChild("Backpack"), p.Character
                        local has = (bp and bp:FindFirstChild("Knife")) or (ch and ch:FindFirstChild("Knife"))
                        if has and ch and ch:FindFirstChild("HumanoidRootPart") then
                            fling(p)
                            break
                        end
                    end
                end
            else
                local h = LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
                if h then h.Health = 0 end
                repeat task.wait() until not isBagFull()
            end
        else
            if FloatPart then FloatPart:Destroy() end
            FloatPart = nil
            for _, v in ipairs(workspace:GetDescendants()) do
                if v:IsA("BasePart") and (v.Name=="Spawn" or v.Name=="PlayerSpawn") and v.Parent.Name~="Lobby" then
                    local hrp = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
                    if hrp then hrp.CFrame = CFrame.new(v.Position) * CFrame.new(0,2.5,0) end
                    break
                end
            end
        end
        return
    end

    moving = true
    local coin, dist = getNextCoin()
    if not coin then
        visited = {}
        moving = false
        return
    end

    visited[coin] = true
    local offsetY = (getgenv().AutoFarmMode == "Below the map") and -3.3 or 1
    local target = coin.Position + Vector3.new(0, offsetY, 0)
    dist = dist or (target - FloatPart.Position).Magnitude

if dist > 90 then
    if tick() - lastTeleportTime >= 3 then
        local hrp = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
        if hrp then
            hrp.CFrame = CFrame.new(target)
            lastTeleportTime = tick()
        end
    end
    task.wait(getgenv().CoinDelay)
    moving = false
    return
end

    local tween = TweenService:Create(FloatPart, TweenInfo.new(dist/getgenv().TweenSpeed, Enum.EasingStyle.Linear), {Position = target})
    tween.Completed:Connect(function()
        task.wait(getgenv().CoinDelay)
        moving = false
    end)
    tween:Play()
end

RunService.Heartbeat:Connect(function()
    if not getgenv().AutoFarmEnabled then return end
    local hrp = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")

    if hrp then
        local bodyVelocity = hrp:FindFirstChild("BodyVelocity")
        if bodyVelocity then
            bodyVelocity:Destroy()
        end
    end

    if hrp and FloatPart then
        hrp.CFrame = FloatPart.CFrame
    end
    if not moving then
        moveToNext()
    end
end)

getgenv().AutoRejoin = true

task.spawn(function()
    local connected = false
    while task.wait(1) do
        if getgenv().AutoRejoin and not connected then
            connected = true
            local gui = game:GetService("CoreGui"):WaitForChild("RobloxPromptGui", 2)
            if gui then
                getgenv().rejoin = gui.promptOverlay.ChildAdded:Connect(function(child)
                    if child.Name == "ErrorPrompt"
                        and child:FindFirstChild("MessageArea")
                        and child.MessageArea:FindFirstChild("ErrorFrame") then
                        
                        queue_on_teleport('loadstring(game:HttpGet("https://raw.githubusercontent.com/MSTTOPPER/Scripts/refs/heads/main/murdmyst2capyhub.txt"))()')
                        game:GetService("TeleportService"):Teleport(game.PlaceId)
                    end
                end)
            end
        end
    end
end)

getgenv().magnetcoin = getgenv().savedConfig.magnetcoin or false
local connection

Library.addToggle(tab5, "magnet coin", "Monedas imÃ¡n", getgenv().magnetcoin, function(state)
	getgenv().magnetcoin = state
	getgenv().savedConfig.magnetcoin = state
	getgenv().saveConfig(getgenv().savedConfig)

	local sizeMultiplier = 4.5

	local function changeCoinSize(coin, size)
		if not getgenv().magnetcoin then return end
		if coin:IsA("BasePart") and coin.Name == "Coin_Server" then
			coin.Size = size
		end
	end

	local function updateCoins(size)
		if not getgenv().magnetcoin then return end
		for _, model in ipairs(workspace:GetChildren()) do
			local coinContainer = model:FindFirstChild("CoinContainer")
			if coinContainer then
				for _, coin in ipairs(coinContainer:GetChildren()) do
					if not getgenv().magnetcoin then return end
					changeCoinSize(coin, size)
				end
			end
		end
	end

	if state then
		updateCoins(Vector3.new(sizeMultiplier, sizeMultiplier, sizeMultiplier))
		connection = game.Workspace.DescendantAdded:Connect(function(coin)
			if not getgenv().magnetcoin then return end
			changeCoinSize(coin, Vector3.new(sizeMultiplier, sizeMultiplier, sizeMultiplier))
		end)
	else
		updateCoins(Vector3.new(1, 1, 1))
		if connection then
			connection:Disconnect()
			connection = nil
		end
	end
end)

getgenv().autoxp = getgenv().savedConfig.autoxp or false

Library.addToggle(tab5, "Auto XP", "", getgenv().autoxp, function(state)
    getgenv().autoxp = state
    getgenv().savedConfig.autoxp = state
    getgenv().saveConfig(getgenv().savedConfig)
end)

game:GetService("RunService").Heartbeat:Connect(function()
    if getgenv().autoxp then
    task.wait(1)
        game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(-108, 138, 9)
    end
end)

Library.addButton(tab6, "Anchor character", "Anclar el personaje", function()
    local char = game.Players.LocalPlayer.Character or game.Players.LocalPlayer.CharacterAdded:Wait()
    isAnchored = not isAnchored
    for _, part in ipairs(char:GetChildren()) do
        if part:IsA("BasePart") then
            part.Anchored = isAnchored
        end
    end
end)


local lp = game:GetService("Players").LocalPlayer
local rs = game:GetService("RunService")
local plrs = game:GetService("Players")

getgenv().antifling = getgenv().savedConfig.antifling or false
getgenv()._afConnection = getgenv()._afConnection or nil

local function toggleAntiFling(state)
    getgenv().antifling = state
    getgenv().savedConfig.antifling = state
    getgenv().saveConfig(getgenv().savedConfig)

    if state then
        if getgenv()._afConnection then getgenv()._afConnection:Disconnect() end

        getgenv()._afConnection = rs.RenderStepped:Connect(function()
            for _, p in ipairs(plrs:GetPlayers()) do
                if p ~= lp and p.Character then
                    for _, part in ipairs(p.Character:GetChildren()) do
                        if part:IsA("BasePart") and part.CanCollide then
                            part.CanCollide = false
                        end
                    end
                end
            end
        end)
    else
        if getgenv()._afConnection then
            getgenv()._afConnection:Disconnect()
            getgenv()._afConnection = nil
        end
    end
end

Library.addToggle(tab6, "Anti fling", "", getgenv().antifling, function(state)
    toggleAntiFling(state)
end)

Library.addButton(tab6, "second life", "Segunda vida", function()
local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait() 
local function activateGodMode()
    local humanoid = character:WaitForChild("Humanoid")
    humanoid.Health = humanoid.MaxHealth
    humanoid.Changed:Connect(function()
        if humanoid.Health < humanoid.MaxHealth then
            humanoid.Health = humanoid.MaxHealth
        end
    end)
end
activateGodMode()
    end)
    
    Library.addButton(tab6, "Reset", "Reaparecer", function()
    game.Players.LocalPlayer.Character:FindFirstChild("Head"):Destroy()
    end)

getgenv()._0x1a2b3c = false
local rs = game:GetService("RunService")
local noclipConnection

Library.addToggle(tab6, "Noclip", "", false, function(state)
    getgenv()._0x1a2b3c = state

    if state then
        if noclipConnection then noclipConnection:Disconnect() end
        noclipConnection = rs.RenderStepped:Connect(function()
            local char = game.Players.LocalPlayer.Character
            if char then
                for _, part in ipairs(char:GetDescendants()) do
                    if part:IsA("BasePart") and part.CanCollide then
                        part.CanCollide = false
                    end
                end
            end
        end)
    else
        if noclipConnection then
            noclipConnection:Disconnect()
            noclipConnection = nil
        end
    end
end)

getgenv().config = savedConfig.config or { FOV = 80, FOVEnabled = false }

Library.addTextbox(tab6, "Adjust FOV", "", tostring(getgenv().config.FOV), function(inputText)
    local value = tonumber(inputText)
    if value then
        getgenv().config.FOV = value
        if getgenv().config.FOVEnabled then
            workspace.CurrentCamera.FieldOfView = value
        end
        savedConfig.config = getgenv().config
        saveConfig(savedConfig)
    end
end)

Library.addToggle(tab6, "Activate FOV", "", getgenv().config.FOVEnabled, function(state)
    getgenv().config.FOVEnabled = state
    if state then
        workspace.CurrentCamera.FieldOfView = getgenv().config.FOV
    else
        workspace.CurrentCamera.FieldOfView = 70
    end
    savedConfig.config = getgenv().config
    saveConfig(savedConfig)
end)

getgenv().P, getgenv().RS, getgenv().UIS, getgenv().p = game:GetService("Players"), game:GetService("RunService"), game:GetService("UserInputService"), game:GetService("Players").LocalPlayer
getgenv().s = getgenv().savedConfig.s or { s = { v = 17, l = false }, j = { p = 50, l = false, i = false }, c = {} }
getgenv().u = function(prop, v)
    local h = getgenv().p.Character and getgenv().p.Character:FindFirstChildOfClass("Humanoid")
    if h then h[prop] = v end
end
getgenv().t = function(key, state, event, func)
    if getgenv().s.c[key] then
        getgenv().s.c[key]:Disconnect()
        getgenv().s.c[key] = nil
    end
    if state then
        getgenv().s.c[key] = event:Connect(func)
    end
end
getgenv().p.CharacterAdded:Connect(function()
    repeat task.wait() until getgenv().p.Character and getgenv().p.Character:FindFirstChild("Head")
    for k, c in pairs(getgenv().s.c) do
        if c then c:Disconnect() getgenv().s.c[k] = nil end
    end
    local h = getgenv().p.Character:WaitForChild("Humanoid")
    if getgenv().s.s.l then getgenv().u("WalkSpeed", getgenv().s.s.v) end
    if getgenv().s.j.l then getgenv().u("JumpPower", getgenv().s.j.p) end
    if getgenv().s.j.i then
        getgenv().t("i", true, getgenv().UIS.JumpRequest, function()
            if getgenv().s.j.i then
                local h = getgenv().p.Character and getgenv().p.Character:FindFirstChildOfClass("Humanoid")
                if h then h:ChangeState("Jumping") end
            end
        end)
    end
end)
Library.addSlider(tab6, "Speed", "Speed", 0, 100, getgenv().s.s.v, function(v)
    getgenv().s.s.v = v
    if getgenv().s.s.l then getgenv().u("WalkSpeed", v) end
    getgenv().savedConfig.s = getgenv().s
    getgenv().saveConfig(getgenv().savedConfig)
end)
Library.addToggle(tab6, "Loop speed", "bucle de velocidad", getgenv().s.s.l, function(state)
    getgenv().s.s.l = state
    getgenv().t("s", state, getgenv().RS.Heartbeat, function()
        if getgenv().s.s.l then getgenv().u("WalkSpeed", getgenv().s.s.v) end
    end)
    getgenv().savedConfig.s = getgenv().s
    getgenv().saveConfig(getgenv().savedConfig)
end)
Library.addSlider(tab6, "Power Jump", "Power Jump", 0, 100, getgenv().s.j.p, function(v)
    getgenv().s.j.p = v
    if getgenv().s.j.l then getgenv().u("JumpPower", v) end
    getgenv().savedConfig.s = getgenv().s
    getgenv().saveConfig(getgenv().savedConfig)
end)
Library.addToggle(tab6, "Power Jump/Loop", "bucle de poder de salto", getgenv().s.j.l, function(state)
    getgenv().s.j.l = state
    getgenv().t("j", state, getgenv().RS.Heartbeat, function()
        if getgenv().s.j.l then getgenv().u("JumpPower", getgenv().s.j.p) end
    end)
    getgenv().savedConfig.s = getgenv().s
    getgenv().saveConfig(getgenv().savedConfig)
end)
Library.addToggle(tab6, "Infinite Jump", "salto infinito", getgenv().s.j.i, function(state)
    getgenv().s.j.i = state
    getgenv().t("i", state, getgenv().UIS.JumpRequest, function()
        if getgenv().s.j.i then
            local h = getgenv().p.Character and getgenv().p.Character:FindFirstChildOfClass("Humanoid")
            if h then h:ChangeState("Jumping") end
        end
    end)
    getgenv().savedConfig.s = getgenv().s
    getgenv().saveConfig(getgenv().savedConfig)
end)

local player = game.Players.LocalPlayer

player.CharacterAdded:Connect(function(Character)
    getgenv().char = Character
    getgenv().humanoid = getgenv().char:WaitForChild("Humanoid")
end)

if player.Character then
    getgenv().char = player.Character
    getgenv().humanoid = getgenv().char:WaitForChild("Humanoid")
end

getgenv().heartbeatConnection = nil
getgenv().glitchPower = 15
getgenv().acceleration = 0.3

Library.addSlider(tab6, "Speed glitch adjust", "", 1, 70, getgenv().savedConfig.glitchPower or 15, function(value)
    getgenv().glitchPower = value
    getgenv().savedConfig.glitchPower = value
    getgenv().saveConfig(getgenv().savedConfig)
end)

Library.addToggle(tab6, "Fake speed glitch", "", getgenv().savedConfig.fakeSpeedGlitch or false, function(state)
    if state then
        getgenv().heartbeatConnection = game:GetService("RunService").Heartbeat:Connect(function()
            local state = getgenv().humanoid:GetState()
            if state == Enum.HumanoidStateType.Jumping or state == Enum.HumanoidStateType.Freefall then
                local dir = getgenv().humanoid.MoveDirection
                if dir.Magnitude > 0 then
                    getgenv().acceleration = math.min(getgenv().acceleration + 0.05, 1)
                    local speedBoost = getgenv().glitchPower * getgenv().acceleration
                    getgenv().char:TranslateBy(dir.Unit * speedBoost / 150)
                end
            end
        end)
    else
        if getgenv().heartbeatConnection then
            getgenv().heartbeatConnection:Disconnect()
            getgenv().heartbeatConnection = nil
        end
        getgenv().acceleration = 0.3
    end
    getgenv().savedConfig.fakeSpeedGlitch = state
    getgenv().saveConfig(getgenv().savedConfig)
end)

Library.addButton(tab6, "fake speed glich with emote", "Falso speed glich con emote", function()
local player=game.Players.LocalPlayer
local gui=Instance.new("ScreenGui")
gui.ResetOnSpawn=false
gui.Parent=player:WaitForChild("PlayerGui")
local button=Instance.new("TextButton")
button.Size=UDim2.new(0,50,0,50)
button.Position=UDim2.new(0.5,-25,0,10)
button.BackgroundTransparency=0.6
button.Draggable=true
button.BackgroundColor3=Color3.fromRGB(200,200,200)
button.Text="Fake Emote Speed"
button.TextColor3=Color3.new(1,1,1)
button.TextSize=6
button.AutoButtonColor=false
button.Parent=gui
local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 8)
corner.Parent = button

local borderFrame = Instance.new("Frame")
borderFrame.Size = UDim2.new(1, 0, 1, 0)
borderFrame.Position = UDim2.new(0, 0, 0, 0)
borderFrame.BackgroundTransparency = 1
borderFrame.ZIndex = button.ZIndex + 1
borderFrame.Parent = button

local borderStroke = Instance.new("UIStroke")
borderStroke.Thickness = 2
borderStroke.Color = Color3.fromRGB(180, 180, 180)
borderStroke.Parent = borderFrame

local frameCorner = Instance.new("UICorner")
frameCorner.CornerRadius = UDim.new(0, 10)
frameCorner.Parent = borderFrame
button.MouseButton1Click:Connect(function()
local Players=game:GetService("Players")
local player=Players.LocalPlayer
local character=player.Character or player.CharacterAdded:Wait()
local humanoid=character:WaitForChild("Humanoid")
local animation=Instance.new("Animation")
animation.AnimationId="rbxassetid://10214319518"
local activeAnimation=humanoid:LoadAnimation(animation)
activeAnimation:Play()
activeAnimation:AdjustSpeed(1.1)
local backpack=player:FindFirstChild("Backpack")
local toolName="Teddy"
local commonEggArgs={[1]="CommonEgg2024"}
game:GetService("ReplicatedStorage").Remotes.Extras.ReplicateToy:InvokeServer(unpack(commonEggArgs))
local args={[1]=toolName}
game:GetService("ReplicatedStorage").Remotes.Extras.ReplicateToy:InvokeServer(unpack(args))
local tool=backpack:FindFirstChild("CommonEgg2024") or character:FindFirstChild("CommonEgg2024")
if tool then
toolName="CommonEgg2024"
end
task.wait(0.6)
local args={[1]=toolName}
game:GetService("ReplicatedStorage").Remotes.Extras.ReplicateToy:InvokeServer(unpack(args))
local equipTool=player.Backpack:FindFirstChild(toolName)
if equipTool then
equipTool.Parent=character
task.wait(0.5)
if character:FindFirstChild(toolName) then
character[toolName].Parent=player.Backpack
end
end
end)
end)
Library.addButton(tab7, "Get all the emotes", "obtener todos los emotes", function()
    local PlayerGui = game.Players.LocalPlayer:WaitForChild("PlayerGui")
    local Emotes = PlayerGui:WaitForChild("MainGUI"):WaitForChild("Game"):FindFirstChild("Emotes")

    if Emotes then
        local success = pcall(function()
            require(game:GetService("ReplicatedStorage").Modules.EmoteModule).GeneratePage(
                {"headless", "zombie", "zen", "ninja", "floss", "dab", "sit"},
                Emotes,
                "Premium Emote lol"
            )
        end)

        if success then
            game.StarterGui:SetCore("SendNotification", {
                Title = "Success",
                Text = "Emotes obtained",
                Duration = 3
            })
        end
    end
end)
Library.addButton(tab7, "Ninja", "", function()
local Remotes = ReplicatedStorage:WaitForChild("Remotes")
    ReplicatedStorage.Remotes.Misc.PlayEmote:Fire("ninja")
end)

Library.addButton(tab7, "Dab", "", function()
local Remotes = ReplicatedStorage:WaitForChild("Remotes")
    ReplicatedStorage.Remotes.Misc.PlayEmote:Fire("dab")
end)

Library.addButton(tab7, "Floss", "", function()
local Remotes = ReplicatedStorage:WaitForChild("Remotes")
    ReplicatedStorage.Remotes.Misc.PlayEmote:Fire("floss")
end)

Library.addButton(tab7, "Headless", "", function()
local Remotes = ReplicatedStorage:WaitForChild("Remotes")
    ReplicatedStorage.Remotes.Misc.PlayEmote:Fire("headless")
end)

Library.addButton(tab7, "Zen", "", function()
local Remotes = ReplicatedStorage:WaitForChild("Remotes")
ReplicatedStorage.Remotes.Misc.PlayEmote:Fire("zen")
end)

Library.addButton(tab7, "Zombie", "", function()
local Remotes = ReplicatedStorage:WaitForChild("Remotes")
ReplicatedStorage.Remotes.Misc.PlayEmote:Fire("zombie")
end)

Library.addButton(tab7, "Sit", "", function()
local Remotes = ReplicatedStorage:WaitForChild("Remotes")
    ReplicatedStorage.Remotes.Misc.PlayEmote:Fire("sit")
end)

Library.addButton(tab8, "Save Config", "Guardar la configuraciÃ³n actual", function()
    saveConfig(savedConfig)
end)

Library.addButton(tab8, "Delete Config", "Eliminar la configuraciÃ³n actual", function()
    if isfile(configFileName) then
        delfile(configFileName)
    end
end)

getgenv().MuteRadiosEnabled = false

Library.addToggle(tab8, "Mute Radios", "", false, function(state)
    getgenv().MuteRadiosEnabled = state
    for _, Player in pairs(Players:GetPlayers()) do
        if Player ~= LocalPlayer then
            local Sound = Player.Character and Player.Character:FindFirstChild("Radio") and Player.Character.Radio:FindFirstChildOfClass("Sound")
            if Sound then
                Sound.Volume = state and 0 or 0.5
            end
        end
    end
end)

getgenv().AntiAFK = getgenv().savedConfig.AntiAFK or false
getgenv().connection = nil
Library.addToggle(tab8, "anti afk", "", getgenv().AntiAFK, function(state)
    getgenv().AntiAFK = state
    getgenv().savedConfig.AntiAFK = state
    getgenv().saveConfig(getgenv().savedConfig)
    if state then
        local virtualUser = game:GetService("VirtualUser")
        getgenv().connection = game:GetService("Players").LocalPlayer.Idled:Connect(function()
            virtualUser:CaptureController()
            virtualUser:ClickButton2(Vector2.new())
        end)
    else
        if getgenv().connection then
            getgenv().connection:Disconnect()
            getgenv().connection = nil
        end
    end
end)

Library.addButton(tab8, "ReJoin", "Re unirse", function()
    game:GetService('TeleportService'):Teleport(game.PlaceId, Plr)
end)

Library.addButton(tab8, "Server hop", "", function() 
local teleportService = game:GetService("TeleportService")
teleportService:Teleport(game.PlaceId)
end)

setfpscap(math.huge)
print("Fps unblock Ã2")
